(function(){"use strict";function init(){const culture=document.getElementsByTagName("html")[0].getAttribute("lang");debugLog(dataLayer,"GTM DataLayer present...");const jobBoardPage=document.getElementsByClassName("js-template-jobBoard")[0];if(jobBoardPage){let model={culture:culture};const qs=window.location.search.substring(1);if(qs.length>0){model.search_params=queryStringToObject(qs);const resultsElem=document.getElementById("js-job-search-results");let results=0;resultsElem&&(results=parseInt(resultsElem.dataset.results));model.search_results_volume=results;pushEventModel("job_search_page",model)}}const jobDetailPage=document.getElementById("js-job-detail");if(jobDetailPage){const schemaScript=document.getElementById("js-job-posting");let model=getModelFromSchema(schemaScript,culture);pushEventModel("job_view",model);addListenerFor(document.getElementById("js-apply-external"),"click",function(){pushEventModel("job_apply_click",model)});addListenerFor(document.getElementById("js-application-form"),"submit",function(){pushEventModel("job_apply_click",model)});addListenersFor(document.querySelectorAll("#js-job-share a"),"click",function(e){pushShareEventModel("job_share",model,e.target)})}addListenersFor(document.querySelectorAll("header .navbar-nav .nav-item a"),"click",function(e){pushClickEventModel("nav_item",e.target.innerText,culture)});addListenerFor(document.getElementById("js-talent-link-nav"),"click",function(e){pushClickEventModel("nav_click_btn",e.target.innerText,culture)});addListenerFor(document.getElementById("js-saved-jobs-page"),"click",function(){let model={culture:culture};pushEventModel("nav_click_saved_jobs",model)});addListenersFor(document.getElementsByClassName("js-view-jobs"),"click",function(e){pushClickEventModel("view_all_jobs_click",e.target.innerText,culture)});addListenersFor(document.getElementsByClassName("js-lang-selector"),"click",function(e){let model={lang_code:e.target.getAttribute("data-lang"),culture:culture};pushEventModel("nav_click_lang_select",model)});addListenersFor(document.getElementsByClassName("js-view-all-posts"),"click",function(e){pushClickEventModel("view_all_blog_posts",e.target.innerText,culture)});addListenersFor(document.getElementsByClassName("js-cta-link"),"click",function(e){pushClickEventModel("click_cta_banner",e.target.innerText,culture)});const blogDetailPage=document.getElementById("js-blog-detail");if(blogDetailPage){let model={blog_title:blogDetailPage.getAttribute("data-blog-title"),blog_category:blogDetailPage.getAttribute("data-blog-category"),date_posted:blogDetailPage.getAttribute("data-blog-date"),culture:culture};pushEventModel("blog_post_view",model);addListenersFor(document.querySelectorAll(".js-blog-share a"),"click",function(e){pushShareEventModel("blog_post_share",model,e.target)})}}function pushEventModel(eventName,model){dataLayer.push({event:eventName,event_model:model});debugTableLog(model,eventName)}function pushClickEventModel(eventName,text,culture){let model={click_text:text,culture:culture};pushEventModel(eventName,model)}function pushShareEventModel(eventName,model,target){const method=target.closest("a").getAttribute("aria-label");let shareModel=JSON.parse(JSON.stringify(model));shareModel.share_method=method;pushEventModel(eventName,shareModel)}function addListenerFor(elem,eventName,actionFunc){elem&&elem.addEventListener(eventName,actionFunc)}function addListenersFor(elems,eventName,actionFunc){if(elems)for(let i=0;i<elems.length;i++){let elem=elems[i];elem.addEventListener(eventName,actionFunc)}}function queryStringToObject(qs){const params={};return qs.split("&").forEach(function(pair){if(pair=pair.split("="),pair[1]!==undefined){let key=decodeURIComponent(pair[0]),val=decodeURIComponent(pair[1]);if(val=val?val.replace(/\++/g," ").trim():"",key.length===0)return;params[key]===undefined?params[key]=val:("function"!=typeof params[key].push&&(params[key]=[params[key]]),params[key].push(val))}}),params}function getModelFromSchema(elem,culture){if(elem){const schema=JSON.parse(elem.textContent),loc=schema.jobLocation;let locs=[];loc.constructor===Array?loc.map(l=>locs.push({name:l.name,country:l.address.addressCountry,region:l.address.addressRegion,city:l.address.addressLocality})):locs.push({name:loc.name,country:loc.address.addressCountry,region:loc.address.addressRegion,city:loc.address.addressLocality});return{job_title:schema.title,job_id:schema.identifier,job_location:locs,job_contract_type:schema.employmentType,job_family:schema.industry,date_posted:schema.datePosted,culture:culture}}}function debugLog(data,title){debugMode&&data&&(title?console.log(title,data):console.log(data))}function debugTableLog(data,title){debugMode&&data&&(title?(console.log(title),console.table(data)):console.table(data))}const debugMode=!1;window.addEventListener("load",function(){typeof dataLayer!="undefined"&&dataLayer&&init()})})();
