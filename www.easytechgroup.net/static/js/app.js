/*! js-cookie v2.2.1 | MIT */
!function(a){var b,c,d;("function"==typeof define&&define.amd&&(define(a),b=!0),"object"==typeof exports&&(module.exports=a(),b=!0),b)||(c=window.Cookies,d=window.Cookies=a(),d.noConflict=function(){return window.Cookies=c,d})}(function(){function a(){for(var c,d,a=0,b={};a<arguments.length;a++){c=arguments[a];for(d in c)b[d]=c[d]}return b}function b(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function c(d){function e(){}function f(b,c,f){var g,h,i;if("undefined"!=typeof document){f=a({path:"/"},e.defaults,f);"number"==typeof f.expires&&(f.expires=new Date(1*new Date+864e5*f.expires));f.expires=f.expires?f.expires.toUTCString():"";try{g=JSON.stringify(c);/^[\{\[]/.test(g)&&(c=g)}catch(j){}c=d.write?d.write(c,b):encodeURIComponent(c+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);b=encodeURIComponent(b+"").replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);h="";for(i in f)f[i]&&(h+="; "+i,!0!==f[i]&&(h+="="+f[i].split(";")[0]));return document.cookie=b+"="+c+h}}function g(a,c){var h,i,j;if("undefined"!=typeof document){for(var e={},f=document.cookie?document.cookie.split("; "):[],g=0;g<f.length;g++){h=f[g].split("=");i=h.slice(1).join("=");c||'"'!==i.charAt(0)||(i=i.slice(1,-1));try{if(j=b(h[0]),i=(d.read||d)(i,j)||b(i),c)try{i=JSON.parse(i)}catch(k){}if(e[j]=i,a===j)break}catch(k){}}return a?e[a]:e}}return e.set=f,e.get=function(a){return g(a,!1)},e.getJSON=function(a){return g(a,!0)},e.remove=function(b,c){f(b,"",a(c,{expires:-1}))},e.defaults={},e.withConverter=c,e}return c(function(){})});
(function(global,factory){typeof exports=="object"&&typeof module!="undefined"?module.exports=factory():typeof define=="function"&&define.amd?define(factory):(global=typeof globalThis!="undefined"?globalThis:global||self,global.TomSelect=factory())})(this,function(){"use strict";function forEvents(events,callback){events.split(/\s+/).forEach(event=>{callback(event)})}function MicroPlugin(Interface){return Interface.plugins={},class extends Interface{constructor(...args){super(...args);this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(name,fn){Interface.plugins[name]={name:name,fn:fn}}initializePlugins(plugins){var key,name;const self=this,queue=[];if(Array.isArray(plugins))plugins.forEach(plugin=>{typeof plugin=="string"?queue.push(plugin):(self.plugins.settings[plugin.name]=plugin.options,queue.push(plugin.name))});else if(plugins)for(key in plugins)plugins.hasOwnProperty(key)&&(self.plugins.settings[key]=plugins[key],queue.push(key));while(name=queue.shift())self.require(name)}loadPlugin(name){var self=this,plugins=self.plugins,plugin=Interface.plugins[name];if(!Interface.plugins.hasOwnProperty(name))throw new Error('Unable to find "'+name+'" plugin');plugins.requested[name]=!0;plugins.loaded[name]=plugin.fn.apply(self,[self.plugins.settings[name]||{}]);plugins.names.push(name)}require(name){var self=this,plugins=self.plugins;if(!self.plugins.loaded.hasOwnProperty(name)){if(plugins.requested[name])throw new Error('Plugin has circular dependency ("'+name+'")');self.loadPlugin(name)}return plugins.loaded[name]}}}function*generator(code_points){for(const[code_point_min,code_point_max]of code_points)for(let i=code_point_min;i<=code_point_max;i++){let composed=String.fromCharCode(i),folded=asciifold(composed);folded!=composed.toLowerCase()&&(folded.length>max_char_length||folded.length!=0&&(yield{folded:folded,composed:composed,code_point:i}))}}function getSettings(input,settings_user){var settings=Object.assign({},defaults,settings_user),attr_data=settings.dataAttr,field_label=settings.labelField,field_value=settings.valueField,field_disabled=settings.disabledField,field_optgroup=settings.optgroupField,field_optgroup_label=settings.optgroupLabelField,field_optgroup_value=settings.optgroupValueField,tag_name=input.tagName.toLowerCase(),placeholder=input.getAttribute("placeholder")||input.getAttribute("data-placeholder");if(!placeholder&&!settings.allowEmptyOption){let option=input.querySelector('option[value=""]');option&&(placeholder=option.textContent)}var settings_element={placeholder:placeholder,options:[],optgroups:[],items:[],maxItems:null},init_select=()=>{var tagName,options=settings_element.options,optionsMap={},group_count=1,readData=el=>{var data=Object.assign({},el.dataset),json=attr_data&&data[attr_data];return typeof json=="string"&&json.length&&(data=Object.assign(data,JSON.parse(json))),data},addOption=(option,group)=>{var value=hash_key(option.value),arr,option_data;value!=null&&(value||settings.allowEmptyOption)&&(optionsMap.hasOwnProperty(value)?group&&(arr=optionsMap[value][field_optgroup],arr?Array.isArray(arr)?arr.push(group):optionsMap[value][field_optgroup]=[arr,group]:optionsMap[value][field_optgroup]=group):(option_data=readData(option),option_data[field_label]=option_data[field_label]||option.textContent,option_data[field_value]=option_data[field_value]||value,option_data[field_disabled]=option_data[field_disabled]||option.disabled,option_data[field_optgroup]=option_data[field_optgroup]||group,option_data.$option=option,optionsMap[value]=option_data,options.push(option_data)),option.selected&&settings_element.items.push(value))},addGroup=optgroup=>{var id,optgroup_data;optgroup_data=readData(optgroup);optgroup_data[field_optgroup_label]=optgroup_data[field_optgroup_label]||optgroup.getAttribute("label")||"";optgroup_data[field_optgroup_value]=optgroup_data[field_optgroup_value]||group_count++;optgroup_data[field_disabled]=optgroup_data[field_disabled]||optgroup.disabled;settings_element.optgroups.push(optgroup_data);id=optgroup_data[field_optgroup_value];iterate(optgroup.children,option=>{addOption(option,id)})};settings_element.maxItems=input.hasAttribute("multiple")?null:1;iterate(input.children,child=>{tagName=child.tagName.toLowerCase(),tagName==="optgroup"?addGroup(child):tagName==="option"&&addOption(child)})},init_textbox=()=>{const data_raw=input.getAttribute(attr_data);if(data_raw)settings_element.options=JSON.parse(data_raw),iterate(settings_element.options,opt=>{settings_element.items.push(opt[field_value])});else{var value=input.value.trim()||"";if(!settings.allowEmptyOption&&!value.length)return;const values=value.split(settings.delimiter);iterate(values,value=>{const option={};option[field_label]=value;option[field_value]=value;settings_element.options.push(option)});settings_element.items=values}};return tag_name==="select"?init_select():init_textbox(),Object.assign({},defaults,settings_element,settings_user)}function change_listener(){addEvent(this.input,"change",()=>{this.sync()})}function checkbox_options(){var self=this,orig_onOptionSelect=self.onOptionSelect,UpdateCheckbox;self.settings.hideSelected=!1;UpdateCheckbox=function(option){setTimeout(()=>{var checkbox=option.querySelector("input");checkbox instanceof HTMLInputElement&&(checkbox.checked=option.classList.contains("selected")?!0:!1)},1)};self.hook("after","setupTemplates",()=>{var orig_render_option=self.settings.render.option;self.settings.render.option=(data,escape_html)=>{var rendered=getDom(orig_render_option.call(self,data,escape_html)),checkbox=document.createElement("input");checkbox.addEventListener("click",function(evt){preventDefault(evt)});checkbox.type="checkbox";const hashed=hash_key(data[self.settings.valueField]);return hashed&&self.items.indexOf(hashed)>-1&&(checkbox.checked=!0),rendered.prepend(checkbox),rendered}});self.on("item_remove",value=>{var option=self.getOption(value);option&&(option.classList.remove("selected"),UpdateCheckbox(option))});self.on("item_add",value=>{var option=self.getOption(value);option&&UpdateCheckbox(option)});self.hook("instead","onOptionSelect",(evt,option)=>{if(option.classList.contains("selected")){option.classList.remove("selected");self.removeItem(option.dataset.value);self.refreshOptions();preventDefault(evt,!0);return}orig_onOptionSelect.call(self,evt,option);UpdateCheckbox(option)})}function clear_button(userOptions){const self=this,options=Object.assign({className:"clear-button",title:"Clear All",html:data=>`<div class="${data.className}" title="${data.title}">&#10799;</div>`},userOptions);self.on("initialize",()=>{var button=getDom(options.html(options));button.addEventListener("click",evt=>{self.isDisabled||(self.clear(),self.settings.mode==="single"&&self.settings.allowEmptyOption&&self.addItem(""),evt.preventDefault(),evt.stopPropagation())});self.control.appendChild(button)})}function drag_drop(){var self=this,orig_lock,orig_unlock;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(self.settings.mode==="multi"){orig_lock=self.lock;orig_unlock=self.unlock;self.hook("instead","lock",()=>{var sortable=$(self.control).data("sortable");return sortable&&sortable.disable(),orig_lock.call(self)});self.hook("instead","unlock",()=>{var sortable=$(self.control).data("sortable");return sortable&&sortable.enable(),orig_unlock.call(self)});self.on("initialize",()=>{var $control=$(self.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:self.isLocked,start:(e,ui)=>{ui.placeholder.css("width",ui.helper.css("width")),$control.css({overflow:"visible"})},stop:()=>{$control.css({overflow:"hidden"});var values=[];$control.children("[data-value]").each(function(){this.dataset.value&&values.push(this.dataset.value)});self.setValue(values)}})})}}function dropdown_header(userOptions){const self=this,options=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:data=>'<div class="'+data.headerClass+'"><div class="'+data.titleRowClass+'"><span class="'+data.labelClass+'">'+data.title+'<\/span><a class="'+data.closeClass+'">&times;<\/a><\/div><\/div>'},userOptions);self.on("initialize",()=>{var header=getDom(options.html(options)),close_link=header.querySelector("."+options.closeClass);close_link&&close_link.addEventListener("click",evt=>{preventDefault(evt,!0),self.close()});self.dropdown.insertBefore(header,self.dropdown.firstChild)})}function caret_position(){var self=this;self.hook("instead","setCaret",new_pos=>{self.settings.mode!=="single"&&self.control.contains(self.control_input)?(new_pos=Math.max(0,Math.min(self.items.length,new_pos)),new_pos==self.caretPos||self.isPending||self.controlChildren().forEach((child,j)=>{j<new_pos?self.control_input.insertAdjacentElement("beforebegin",child):self.control.appendChild(child)})):new_pos=self.items.length,self.caretPos=new_pos});self.hook("instead","moveCaret",direction=>{if(self.isFocused){const last_active=self.getLastActive(direction);if(last_active){const idx=nodeIndex(last_active);self.setCaret(direction>0?idx+1:idx);self.setActiveItem();removeClasses(last_active,"last-active")}else self.setCaret(self.caretPos+direction)}})}function dropdown_input(){const self=this;self.settings.shouldOpen=!0;self.hook("before","setup",()=>{self.focus_node=self.control;addClasses(self.control_input,"dropdown-input");const div=getDom('<div class="dropdown-input-wrap">');div.append(self.control_input);self.dropdown.insertBefore(div,self.dropdown.firstChild);const placeholder=getDom('<input class="items-placeholder" tabindex="-1" />');placeholder.placeholder=self.settings.placeholder||"";self.control.append(placeholder)});self.on("initialize",()=>{self.control_input.addEventListener("keydown",evt=>{switch(evt.keyCode){case KEY_ESC:self.isOpen&&(preventDefault(evt,!0),self.close());self.clearActiveItems();return;case KEY_TAB:self.focus_node.tabIndex=-1}return self.onKeyDown.call(self,evt)});self.on("blur",()=>{self.focus_node.tabIndex=self.isDisabled?-1:self.tabIndex});self.on("dropdown_open",()=>{self.control_input.focus()});const orig_onBlur=self.onBlur;self.hook("instead","onBlur",evt=>{if(!evt||evt.relatedTarget!=self.control_input)return orig_onBlur.call(self)});addEvent(self.control_input,"blur",()=>self.onBlur());self.hook("before","close",()=>{self.isOpen&&self.focus_node.focus({preventScroll:!0})})})}function input_autogrow(){var self=this;self.on("initialize",()=>{var test_input=document.createElement("span"),control=self.control_input,transfer_styles,resize;test_input.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ";self.wrapper.appendChild(test_input);transfer_styles=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const style_name of transfer_styles)test_input.style[style_name]=control.style[style_name];resize=()=>{test_input.textContent=control.value,control.style.width=test_input.clientWidth+"px"};resize();self.on("update item_add item_remove",resize);addEvent(control,"input",resize);addEvent(control,"keyup",resize);addEvent(control,"blur",resize);addEvent(control,"update",resize)})}function no_backspace_delete(){var self=this,orig_deleteSelection=self.deleteSelection;this.hook("instead","deleteSelection",evt=>self.activeItems.length?orig_deleteSelection.call(self,evt):!1)}function no_active_items(){this.hook("instead","setActiveItem",()=>{});this.hook("instead","selectAll",()=>{})}function optgroup_columns(){var self=this,orig_keydown=self.onKeyDown;self.hook("instead","onKeyDown",evt=>{var index,option,options,optgroup;if(!self.isOpen||!(evt.keyCode===KEY_LEFT||evt.keyCode===KEY_RIGHT))return orig_keydown.call(self,evt);(self.ignoreHover=!0,optgroup=parentMatch(self.activeOption,"[data-group]"),index=nodeIndex(self.activeOption,"[data-selectable]"),optgroup)&&(optgroup=evt.keyCode===KEY_LEFT?optgroup.previousSibling:optgroup.nextSibling,optgroup)&&(options=optgroup.querySelectorAll("[data-selectable]"),option=options[Math.min(options.length-1,index)],option&&self.setActiveOption(option))})}function remove_button(userOptions){var self,html;const options=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},userOptions);(self=this,options.append)&&(html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+"<\/a>",self.hook("after","setupTemplates",()=>{var orig_render_item=self.settings.render.item;self.settings.render.item=(data,escape)=>{var item=getDom(orig_render_item.call(self,data,escape)),close_button=getDom(html);return item.appendChild(close_button),addEvent(close_button,"mousedown",evt=>{preventDefault(evt,!0)}),addEvent(close_button,"click",evt=>{(preventDefault(evt,!0),self.isLocked)||self.shouldDelete([item],evt)&&(self.removeItem(item),self.refreshOptions(!1),self.inputState())}),item}}))}function restore_on_backspace(userOptions){const self=this,options=Object.assign({text:option=>option[self.settings.labelField]},userOptions);self.on("item_remove",function(value){if(self.isFocused&&self.control_input.value.trim()===""){var option=self.options[value];option&&self.setTextboxValue(options.text.call(self,option))}})}function virtual_scroll(){const self=this,orig_canLoad=self.canLoad,orig_clearActiveOption=self.clearActiveOption,orig_loadCallback=self.loadCallback;var pagination={},dropdown_content,loading_more=!1,load_more_opt,default_values=[];if(self.settings.shouldLoadMore||(self.settings.shouldLoadMore=()=>{const scroll_percent=dropdown_content.clientHeight/(dropdown_content.scrollHeight-dropdown_content.scrollTop);if(scroll_percent>.9)return!0;if(self.activeOption){var selectable=self.selectable(),index=Array.from(selectable).indexOf(self.activeOption);if(index>=selectable.length-2)return!0}return!1}),!self.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";self.settings.sortField=[{field:"$order"},{field:"$score"}];const canLoadMore=query=>typeof self.settings.maxOptions=="number"&&dropdown_content.children.length>=self.settings.maxOptions?!1:query in pagination&&pagination[query]?!0:!1,clearFilter=(option,value)=>self.items.indexOf(value)>=0||default_values.indexOf(value)>=0?!0:!1;self.setNextUrl=(value,next_url)=>{pagination[value]=next_url};self.getUrl=query=>{if(query in pagination){const next_url=pagination[query];return pagination[query]=!1,next_url}return pagination={},self.settings.firstUrl.call(self,query)};self.hook("instead","clearActiveOption",()=>{if(!loading_more)return orig_clearActiveOption.call(self)});self.hook("instead","canLoad",query=>(query in pagination)?canLoadMore(query):orig_canLoad.call(self,query));self.hook("instead","loadCallback",(options,optgroups)=>{if(loading_more){if(load_more_opt){const first_option=options[0];first_option!==undefined&&(load_more_opt.dataset.value=first_option[self.settings.valueField])}}else self.clearOptions(clearFilter);orig_loadCallback.call(self,options,optgroups);loading_more=!1});self.hook("after","refreshOptions",()=>{const query=self.lastValue;var option;canLoadMore(query)?(option=self.render("loading_more",{query:query}),option&&(option.setAttribute("data-selectable",""),load_more_opt=option)):query in pagination&&!dropdown_content.querySelector(".no-results")&&(option=self.render("no_more_results",{query:query}));option&&(addClasses(option,self.settings.optionClass),dropdown_content.append(option))});self.on("initialize",()=>{default_values=Object.keys(self.options),dropdown_content=self.dropdown_content,self.settings.render=Object.assign({},{loading_more:()=>`<div class="loading-more-results">Loading more results ... </div>`,no_more_results:()=>`<div class="no-more-results">No more results</div>`},self.settings.render),dropdown_content.addEventListener("scroll",()=>{self.settings.shouldLoadMore.call(self)&&canLoadMore(self.lastValue)&&(loading_more||(loading_more=!0,self.load.call(self,self.lastValue)))})})}var defaults,instance_i;class MicroEvent{constructor(){this._events=void 0;this._events={}}on(events,fct){forEvents(events,event=>{const event_array=this._events[event]||[];event_array.push(fct);this._events[event]=event_array})}off(events,fct){var n=arguments.length;if(n===0){this._events={};return}forEvents(events,event=>{if(n===1){delete this._events[event];return}const event_array=this._events[event];event_array!==undefined&&(event_array.splice(event_array.indexOf(fct),1),this._events[event]=event_array)})}trigger(events,...args){var self=this;forEvents(events,event=>{const event_array=self._events[event];event_array!==undefined&&event_array.forEach(fct=>{fct.apply(self,args)})})}}
/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */
const arrayToPattern=chars=>(chars=chars.filter(Boolean),chars.length<2)?chars[0]||"":maxValueLength(chars)==1?"["+chars.join("")+"]":"(?:"+chars.join("|")+")",sequencePattern=array=>{if(!hasDuplicates(array))return array.join("");let pattern="",prev_char_count=0;const prev_pattern=()=>{prev_char_count>1&&(pattern+="{"+prev_char_count+"}")};return array.forEach((char,i)=>{if(char===array[i-1]){prev_char_count++;return}prev_pattern();pattern+=char;prev_char_count=1}),prev_pattern(),pattern},setToPattern=chars=>{let array=toArray(chars);return arrayToPattern(array)},hasDuplicates=array=>new Set(array).size!==array.length,escape_regex=str=>(str+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),maxValueLength=array=>array.reduce((longest,value)=>Math.max(longest,unicodeLength(value)),0),unicodeLength=str=>toArray(str).length,toArray=p=>Array.from(p);
/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */
const allSubstrings=input=>{if(input.length===1)return[[input]];let result=[];const start=input.substring(1),suba=allSubstrings(start);return suba.forEach(function(subresult){let tmp=subresult.slice(0);tmp[0]=input.charAt(0)+tmp[0];result.push(tmp);tmp=subresult.slice(0);tmp.unshift(input.charAt(0));result.push(tmp)}),result};
/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */
const code_points=[[0,65535]];let unicode_map,multi_char_reg;const max_char_length=3,latin_convert={},latin_condensed={"/":"⁄∕","0":"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let latin in latin_condensed){let unicode=latin_condensed[latin]||"";for(let i=0;i<unicode.length;i++){let char=unicode.substring(i,i+1);latin_convert[char]=latin}}const convert_pat=new RegExp(Object.keys(latin_convert).join("|")+"|[̀-ͯ·ʾʼ]","gu"),initialize=_code_points=>{unicode_map===undefined&&(unicode_map=generateMap(_code_points||code_points))},normalize=(str,form="NFKD")=>str.normalize(form),asciifold=str=>toArray(str).reduce((result,char)=>result+_asciifold(char),""),_asciifold=str=>(str=normalize(str).toLowerCase().replace(convert_pat,char=>latin_convert[char]||""),normalize(str,"NFC"));const generateSets=code_points=>{const unicode_sets={},addMatching=(folded,to_add)=>{const folded_set=unicode_sets[folded]||new Set,patt=new RegExp("^"+setToPattern(folded_set)+"$","iu");to_add.match(patt)||(folded_set.add(escape_regex(to_add)),unicode_sets[folded]=folded_set)};for(let value of generator(code_points))addMatching(value.folded,value.folded),addMatching(value.folded,value.composed);return unicode_sets},generateMap=code_points=>{const unicode_sets=generateSets(code_points),unicode_map={};let multi_char=[];for(let folded in unicode_sets){let set=unicode_sets[folded];set&&(unicode_map[folded]=setToPattern(set));folded.length>1&&multi_char.push(escape_regex(folded))}multi_char.sort((a,b)=>b.length-a.length);const multi_char_patt=arrayToPattern(multi_char);return multi_char_reg=new RegExp("^"+multi_char_patt,"u"),unicode_map},mapSequence=(strings,min_replacement=1)=>{let chars_replaced=0;return(strings=strings.map(str=>(unicode_map[str]&&(chars_replaced+=str.length),unicode_map[str]||str)),chars_replaced>=min_replacement)?sequencePattern(strings):""},substringsToPattern=(str,min_replacement=1)=>(min_replacement=Math.max(min_replacement,str.length-1),arrayToPattern(allSubstrings(str).map(sub_pat=>mapSequence(sub_pat,min_replacement)))),sequencesToPattern=(sequences,all=true)=>{let min_replacement=sequences.length>1?1:0;return arrayToPattern(sequences.map(sequence=>{let seq=[];const len=all?sequence.length():sequence.length()-1;for(let j=0;j<len;j++)seq.push(substringsToPattern(sequence.substrs[j]||"",min_replacement));return sequencePattern(seq)}))},inSequences=(needle_seq,sequences)=>{for(const seq of sequences)if(seq.start==needle_seq.start&&seq.end==needle_seq.end&&seq.substrs.join("")===needle_seq.substrs.join("")){let needle_parts=needle_seq.parts;const filter=part=>{for(const needle_part of needle_parts){if(needle_part.start===part.start&&needle_part.substr===part.substr)return!1;if(part.length!=1&&needle_part.length!=1&&(part.start<needle_part.start&&part.end>needle_part.start||needle_part.start<part.start&&needle_part.end>part.start))return!0}return!1};let filtered=seq.parts.filter(filter);if(!(filtered.length>0))return!0}return!1};class Sequence{constructor(){this.parts=[];this.substrs=[];this.start=0;this.end=0}add(part){part&&(this.parts.push(part),this.substrs.push(part.substr),this.start=Math.min(part.start,this.start),this.end=Math.max(part.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(position,last_piece){let clone=new Sequence,parts=JSON.parse(JSON.stringify(this.parts)),last_part=parts.pop();for(const part of parts)clone.add(part);let last_substr=last_piece.substr.substring(0,position-last_part.start),clone_last_len=last_substr.length;return clone.add({start:last_part.start,end:last_part.start+clone_last_len,length:clone_last_len,substr:last_substr}),clone}}const getPattern=str=>{initialize();str=asciifold(str);let pattern="",sequences=[new Sequence];for(let i=0;i<str.length;i++){let substr=str.substring(i),match=substr.match(multi_char_reg);const char=str.substring(i,i+1),match_str=match?match[0]:null;let overlapping=[],added_types=new Set;for(const sequence of sequences){const last_piece=sequence.last();if(!last_piece||last_piece.length==1||last_piece.end<=i)if(match_str){const len=match_str.length;sequence.add({start:i,end:i+len,length:len,substr:match_str});added_types.add("1")}else sequence.add({start:i,end:i+1,length:1,substr:char}),added_types.add("2");else if(match_str){let clone=sequence.clone(i,last_piece);const len=match_str.length;clone.add({start:i,end:i+len,length:len,substr:match_str});overlapping.push(clone)}else added_types.add("3")}if(overlapping.length>0){overlapping=overlapping.sort((a,b)=>a.length()-b.length());for(let clone of overlapping)inSequences(clone,sequences)||sequences.push(clone);continue}if(i>0&&added_types.size==1&&!added_types.has("3")){pattern+=sequencesToPattern(sequences,!1);let new_seq=new Sequence;const old_seq=sequences[0];old_seq&&new_seq.add(old_seq.last());sequences=[new_seq]}}return pattern+=sequencesToPattern(sequences,!0)};
/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */
const getAttr=(obj,name)=>{if(obj)return obj[name]},getAttrNesting=(obj,name)=>{if(obj){for(var part,names=name.split(".");(part=names.shift())&&(obj=obj[part]););return obj}},scoreValue=(value,token,weight)=>{var score,pos;return value?(value=value+"",token.regex==null)?0:(pos=value.search(token.regex),pos===-1)?0:(score=token.string.length/value.length,pos===0&&(score+=.5),score*weight):0},propToArray=(obj,key)=>{var value=obj[key];if(typeof value=="function")return value;value&&!Array.isArray(value)&&(obj[key]=[value])},iterate$1=(object,callback)=>{if(Array.isArray(object))object.forEach(callback);else for(var key in object)object.hasOwnProperty(key)&&callback(object[key],key)},cmp=(a,b)=>typeof a=="number"&&typeof b=="number"?a>b?1:a<b?-1:0:(a=asciifold(a+"").toLowerCase(),b=asciifold(b+"").toLowerCase(),a>b)?1:b>a?-1:0;
/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */
class Sifter{constructor(items,settings){this.items=void 0;this.settings=void 0;this.items=items;this.settings=settings||{diacritics:!0}}tokenize(query,respect_word_boundaries,weights){if(!query||!query.length)return[];const tokens=[],words=query.split(/\s+/);var field_regex;return weights&&(field_regex=new RegExp("^("+Object.keys(weights).map(escape_regex).join("|")+"):(.*)$")),words.forEach(word=>{let field_match,field=null,regex=null;field_regex&&(field_match=word.match(field_regex))&&(field=field_match[1],word=field_match[2]);word.length>0&&(regex=this.settings.diacritics?getPattern(word)||null:escape_regex(word),regex&&respect_word_boundaries&&(regex="\\b"+regex));tokens.push({string:word,regex:regex?new RegExp(regex,"iu"):null,field:field})}),tokens}getScoreFunction(query,options){var search=this.prepareSearch(query,options);return this._getScoreFunction(search)}_getScoreFunction(search){const tokens=search.tokens,token_count=tokens.length;if(!token_count)return function(){return 0};const fields=search.options.fields,weights=search.weights,field_count=fields.length,getAttrFn=search.getAttrFn;if(!field_count)return function(){return 1};const scoreObject=function(){return field_count===1?function(token,data){const field=fields[0].field;return scoreValue(getAttrFn(data,field),token,weights[field]||1)}:function(token,data){var sum=0;if(token.field){const value=getAttrFn(data,token.field);sum+=!token.regex&&value?1/field_count:scoreValue(value,token,1)}else iterate$1(weights,(weight,field)=>{sum+=scoreValue(getAttrFn(data,field),token,weight)});return sum/field_count}}();return token_count===1?function(data){return scoreObject(tokens[0],data)}:search.options.conjunction==="and"?function(data){var score,sum=0;for(let token of tokens){if(score=scoreObject(token,data),score<=0)return 0;sum+=score}return sum/token_count}:function(data){var sum=0;return iterate$1(tokens,token=>{sum+=scoreObject(token,data)}),sum/token_count}}getSortFunction(query,options){var search=this.prepareSearch(query,options);return this._getSortFunction(search)}_getSortFunction(search){var implicit_score,sort_flds=[];const self=this,options=search.options,sort=!search.query&&options.sort_empty?options.sort_empty:options.sort;if(typeof sort=="function")return sort.bind(this);const get_field=function(name,result){return name==="$score"?result.score:search.getAttrFn(self.items[result.id],name)};if(sort)for(let s of sort)(search.query||s.field!=="$score")&&sort_flds.push(s);if(search.query){implicit_score=!0;for(let fld of sort_flds)if(fld.field==="$score"){implicit_score=!1;break}implicit_score&&sort_flds.unshift({field:"$score",direction:"desc"})}else sort_flds=sort_flds.filter(fld=>fld.field!=="$score");const sort_flds_count=sort_flds.length;return sort_flds_count?function(a,b){var result,field;for(let sort_fld of sort_flds){field=sort_fld.field;let multiplier=sort_fld.direction==="desc"?-1:1;if(result=multiplier*cmp(get_field(field,a),get_field(field,b)),result)return result}return 0}:null}prepareSearch(query,optsUser){const weights={};var options=Object.assign({},optsUser);if(propToArray(options,"sort"),propToArray(options,"sort_empty"),options.fields){propToArray(options,"fields");const fields=[];options.fields.forEach(field=>{typeof field=="string"&&(field={field:field,weight:1}),fields.push(field),weights[field.field]="weight"in field?field.weight:1});options.fields=fields}return{options:options,query:query.toLowerCase().trim(),tokens:this.tokenize(query,options.respect_word_boundaries,weights),total:0,items:[],weights:weights,getAttrFn:options.nesting?getAttrNesting:getAttr}}search(query,options){var self=this,score,search;search=this.prepareSearch(query,options);options=search.options;query=search.query;const fn_score=options.score||self._getScoreFunction(search);query.length?iterate$1(self.items,(item,id)=>{score=fn_score(item),(options.filter===!1||score>0)&&search.items.push({score:score,id:id})}):iterate$1(self.items,(_,id)=>{search.items.push({score:1,id:id})});const fn_sort=self._getSortFunction(search);return fn_sort&&search.items.sort(fn_sort),search.total=search.items.length,typeof options.limit=="number"&&(search.items=search.items.slice(0,options.limit)),search}}const iterate=(object,callback)=>{if(Array.isArray(object))object.forEach(callback);else for(var key in object)object.hasOwnProperty(key)&&callback(object[key],key)},getDom=query=>{if(query.jquery)return query[0];if(query instanceof HTMLElement)return query;if(isHtmlString(query)){var tpl=document.createElement("template");return tpl.innerHTML=query.trim(),tpl.content.firstChild}return document.querySelector(query)},isHtmlString=arg=>typeof arg=="string"&&arg.indexOf("<")>-1?!0:!1,escapeQuery=query=>query.replace(/['"\\]/g,"\\$&"),triggerEvent=(dom_el,event_name)=>{var event=document.createEvent("HTMLEvents");event.initEvent(event_name,!0,!1);dom_el.dispatchEvent(event)},applyCSS=(dom_el,css)=>{Object.assign(dom_el.style,css)},addClasses=(elmts,...classes)=>{var norm_classes=classesArray(classes);elmts=castAsArray(elmts);elmts.map(el=>{norm_classes.map(cls=>{el.classList.add(cls)})})},removeClasses=(elmts,...classes)=>{var norm_classes=classesArray(classes);elmts=castAsArray(elmts);elmts.map(el=>{norm_classes.map(cls=>{el.classList.remove(cls)})})},classesArray=args=>{var classes=[];return iterate(args,_classes=>{typeof _classes=="string"&&(_classes=_classes.trim().split(/[\11\12\14\15\40]/)),Array.isArray(_classes)&&(classes=classes.concat(_classes))}),classes.filter(Boolean)},castAsArray=arg=>(Array.isArray(arg)||(arg=[arg]),arg),parentMatch=(target,selector,wrapper)=>{if(!wrapper||wrapper.contains(target))while(target&&target.matches){if(target.matches(selector))return target;target=target.parentNode}},getTail=(list,direction=0)=>direction>0?list[list.length-1]:list[0],isEmptyObject=obj=>Object.keys(obj).length===0,nodeIndex=(el,amongst)=>{if(!el)return-1;amongst=amongst||el.nodeName;for(var i=0;el=el.previousElementSibling;)el.matches(amongst)&&i++;return i},setAttr=(el,attrs)=>{iterate(attrs,(val,attr)=>{val==null?el.removeAttribute(attr):el.setAttribute(attr,""+val)})},replaceNode=(existing,replacement)=>{existing.parentNode&&existing.parentNode.replaceChild(replacement,existing)},highlight=(element,regex)=>{if(regex!==null){if(typeof regex=="string"){if(!regex.length)return;regex=new RegExp(regex,"i")}const highlightText=node=>{var match=node.data.match(regex),spannode,middlebit,middleclone;return match&&node.data.length>0?(spannode=document.createElement("span"),spannode.className="highlight",middlebit=node.splitText(match.index),middlebit.splitText(match[0].length),middleclone=middlebit.cloneNode(!0),spannode.appendChild(middleclone),replaceNode(middlebit,spannode),1):0},highlightChildren=node=>{node.nodeType===1&&node.childNodes&&!/(script|style)/i.test(node.tagName)&&(node.className!=="highlight"||node.tagName!=="SPAN")&&Array.from(node.childNodes).forEach(element=>{highlightRecursive(element)})},highlightRecursive=node=>node.nodeType===3?highlightText(node):(highlightChildren(node),0);highlightRecursive(element)}},removeHighlight=el=>{var elements=el.querySelectorAll("span.highlight");Array.prototype.forEach.call(elements,function(el){var parent=el.parentNode;parent.replaceChild(el.firstChild,el);parent.normalize()})},KEY_A=65,KEY_RETURN=13,KEY_ESC=27,KEY_LEFT=37,KEY_UP=38,KEY_RIGHT=39,KEY_DOWN=40,KEY_BACKSPACE=8,KEY_DELETE=46,KEY_TAB=9,IS_MAC=typeof navigator=="undefined"?!1:/Mac/.test(navigator.userAgent),KEY_SHORTCUT=IS_MAC?"metaKey":"ctrlKey";defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(query){return query.length>0},render:{}};const hash_key=value=>typeof value=="undefined"||value===null?null:get_hash(value),get_hash=value=>typeof value=="boolean"?value?"1":"0":value+"",escape_html=str=>(str+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),loadDebounce=(fn,delay)=>{var timeout;return function(value,callback){var self=this;timeout&&(self.loading=Math.max(self.loading-1,0),clearTimeout(timeout));timeout=setTimeout(function(){timeout=null;self.loadedSearches[value]=!0;fn.call(self,value,callback)},delay)}},debounce_events=(self,types,fn)=>{var type,trigger=self.trigger,event_args={};self.trigger=function(){var type=arguments[0];if(types.indexOf(type)!==-1)event_args[type]=arguments;else return trigger.apply(self,arguments)};fn.apply(self,[]);self.trigger=trigger;for(type of types)type in event_args&&trigger.apply(self,event_args[type])},getSelection=input=>({start:input.selectionStart||0,length:(input.selectionEnd||0)-(input.selectionStart||0)}),preventDefault=(evt,stop=false)=>{evt&&(evt.preventDefault(),stop&&evt.stopPropagation())},addEvent=(target,type,callback,options)=>{target.addEventListener(type,callback,options)},isKeyDown=(key_name,evt)=>{if(!evt||!evt[key_name])return!1;var count=(evt.altKey?1:0)+(evt.ctrlKey?1:0)+(evt.shiftKey?1:0)+(evt.metaKey?1:0);return count===1?!0:!1},getId=(el,id)=>{const existing_id=el.getAttribute("id");return existing_id?existing_id:(el.setAttribute("id",id),id)},addSlashes=str=>str.replace(/[\\"']/g,"\\$&"),append=(parent,node)=>{node&&parent.append(node)};instance_i=0;class TomSelect extends MicroPlugin(MicroEvent){constructor(input_arg,user_settings){var dir,input,computedStyle,filter,control_input,attrs;if(super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],instance_i++,input=getDom(input_arg),input.tomselect)throw new Error("Tom Select already initialized on this element");input.tomselect=this;computedStyle=window.getComputedStyle&&window.getComputedStyle(input,null);dir=computedStyle.getPropertyValue("direction");const settings=getSettings(input,user_settings);this.settings=settings;this.input=input;this.tabIndex=input.tabIndex||0;this.is_select_tag=input.tagName.toLowerCase()==="select";this.rtl=/rtl/i.test(dir);this.inputId=getId(input,"tomselect-"+instance_i);this.isRequired=input.required;this.sifter=new Sifter(this.options,{diacritics:settings.diacritics});settings.mode=settings.mode||(settings.maxItems===1?"single":"multi");typeof settings.hideSelected!="boolean"&&(settings.hideSelected=settings.mode==="multi");typeof settings.hidePlaceholder!="boolean"&&(settings.hidePlaceholder=settings.mode!=="multi");filter=settings.createFilter;typeof filter!="function"&&(typeof filter=="string"&&(filter=new RegExp(filter)),settings.createFilter=filter instanceof RegExp?input=>filter.test(input):value=>this.settings.duplicates||!this.options[value]);this.initializePlugins(settings.plugins);this.setupCallbacks();this.setupTemplates();const wrapper=getDom("<div>"),control=getDom("<div>"),dropdown=this._render("dropdown"),dropdown_content=getDom(`<div role="listbox" tabindex="-1">`),classes=this.input.getAttribute("class")||"",inputMode=settings.mode;addClasses(wrapper,settings.wrapperClass,classes,inputMode);addClasses(control,settings.controlClass);append(wrapper,control);addClasses(dropdown,settings.dropdownClass,inputMode);settings.copyClassesToDropdown&&addClasses(dropdown,classes);addClasses(dropdown_content,settings.dropdownContentClass);append(dropdown,dropdown_content);getDom(settings.dropdownParent||wrapper).appendChild(dropdown);isHtmlString(settings.controlInput)?(control_input=getDom(settings.controlInput),attrs=["autocorrect","autocapitalize","autocomplete"],iterate$1(attrs,attr=>{input.getAttribute(attr)&&setAttr(control_input,{[attr]:input.getAttribute(attr)})}),control_input.tabIndex=-1,control.appendChild(control_input),this.focus_node=control_input):settings.controlInput?(control_input=getDom(settings.controlInput),this.focus_node=control_input):(control_input=getDom("<input/>"),this.focus_node=control);this.wrapper=wrapper;this.dropdown=dropdown;this.dropdown_content=dropdown_content;this.control=control;this.control_input=control_input;this.setup()}setup(){const self=this,settings=self.settings,control_input=self.control_input,dropdown=self.dropdown,dropdown_content=self.dropdown_content,wrapper=self.wrapper,control=self.control,input=self.input,focus_node=self.focus_node,passive_event={passive:!0},listboxId=self.inputId+"-ts-dropdown";setAttr(dropdown_content,{id:listboxId});setAttr(focus_node,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":listboxId});const control_id=getId(focus_node,self.inputId+"-ts-control"),query="label[for='"+escapeQuery(self.inputId)+"']",label=document.querySelector(query),label_click=self.focus.bind(self);if(label){addEvent(label,"click",label_click);setAttr(label,{"for":control_id});const label_id=getId(label,self.inputId+"-ts-label");setAttr(focus_node,{"aria-labelledby":label_id});setAttr(dropdown_content,{"aria-labelledby":label_id})}if(wrapper.style.width=input.style.width,self.plugins.names.length){const classes_plugins="plugin-"+self.plugins.names.join(" plugin-");addClasses([wrapper,dropdown],classes_plugins)}(settings.maxItems===null||settings.maxItems>1)&&self.is_select_tag&&setAttr(input,{multiple:"multiple"});settings.placeholder&&setAttr(control_input,{placeholder:settings.placeholder});!settings.splitOn&&settings.delimiter&&(settings.splitOn=new RegExp("\\s*"+escape_regex(settings.delimiter)+"+\\s*"));settings.load&&settings.loadThrottle&&(settings.load=loadDebounce(settings.load,settings.loadThrottle));self.control_input.type=input.type;addEvent(dropdown,"mousemove",()=>{self.ignoreHover=!1});addEvent(dropdown,"mouseenter",e=>{var target_match=parentMatch(e.target,"[data-selectable]",dropdown);if(target_match)self.onOptionHover(e,target_match)},{capture:!0});addEvent(dropdown,"click",evt=>{const option=parentMatch(evt.target,"[data-selectable]");if(option){self.onOptionSelect(evt,option);preventDefault(evt,!0)}});addEvent(control,"click",evt=>{var target_match=parentMatch(evt.target,"[data-ts-item]",control);if(target_match&&self.onItemSelect(evt,target_match)){preventDefault(evt,!0);return}control_input.value==""&&(self.onClick(),preventDefault(evt,!0))});addEvent(focus_node,"keydown",e=>self.onKeyDown(e));addEvent(control_input,"keypress",e=>self.onKeyPress(e));addEvent(control_input,"input",e=>self.onInput(e));addEvent(focus_node,"blur",e=>self.onBlur(e));addEvent(focus_node,"focus",e=>self.onFocus(e));addEvent(control_input,"paste",e=>self.onPaste(e));const doc_mousedown=evt=>{const target=evt.composedPath()[0];if(!wrapper.contains(target)&&!dropdown.contains(target)){self.isFocused&&self.blur();self.inputState();return}target==control_input&&self.isOpen?evt.stopPropagation():preventDefault(evt,!0)},win_scroll=()=>{self.isOpen&&self.positionDropdown()};addEvent(document,"mousedown",doc_mousedown);addEvent(window,"scroll",win_scroll,passive_event);addEvent(window,"resize",win_scroll,passive_event);this._destroy=()=>{document.removeEventListener("mousedown",doc_mousedown),window.removeEventListener("scroll",win_scroll),window.removeEventListener("resize",win_scroll),label&&label.removeEventListener("click",label_click)};this.revertSettings={innerHTML:input.innerHTML,tabIndex:input.tabIndex};input.tabIndex=-1;input.insertAdjacentElement("afterend",self.wrapper);self.sync(!1);settings.items=[];delete settings.optgroups;delete settings.options;addEvent(input,"invalid",()=>{self.isValid&&(self.isValid=!1,self.isInvalid=!0,self.refreshState())});self.updateOriginalInput();self.refreshItems();self.close(!1);self.inputState();self.isSetup=!0;input.disabled?self.disable():self.enable();self.on("change",this.onChange);addClasses(input,"tomselected","ts-hidden-accessible");self.trigger("initialize");settings.preload===!0&&self.preload()}setupOptions(options=[],optgroups=[]){this.addOptions(options);iterate$1(optgroups,optgroup=>{this.registerOptionGroup(optgroup)})}setupTemplates(){var self=this,field_label=self.settings.labelField,field_optgroup=self.settings.optgroupLabelField,templates={optgroup:data=>{let optgroup=document.createElement("div");return optgroup.className="optgroup",optgroup.appendChild(data.options),optgroup},optgroup_header:(data,escape)=>'<div class="optgroup-header">'+escape(data[field_optgroup])+"<\/div>",option:(data,escape)=>"<div>"+escape(data[field_label])+"<\/div>",item:(data,escape)=>"<div>"+escape(data[field_label])+"<\/div>",option_create:(data,escape)=>'<div class="create">Add <strong>'+escape(data.input)+"<\/strong>&hellip;<\/div>",no_results:()=>'<div class="no-results">No results found<\/div>',loading:()=>'<div class="spinner"><\/div>',not_loading:()=>{},dropdown:()=>"<div><\/div>"};self.settings.render=Object.assign({},templates,self.settings.render)}setupCallbacks(){var key,fn,callbacks={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(key in callbacks)if(fn=this.settings[callbacks[key]],fn)this.on(key,fn)}sync(get_settings=true){const self=this,settings=get_settings?getSettings(self.input,{delimiter:self.settings.delimiter}):self.settings;self.setupOptions(settings.options,settings.optgroups);self.setValue(settings.items||[],!0);self.lastQuery=null}onClick(){var self=this;if(self.activeItems.length>0){self.clearActiveItems();self.focus();return}self.isFocused&&self.isOpen?self.blur():self.focus()}onMouseDown(){}onChange(){triggerEvent(this.input,"input");triggerEvent(this.input,"change")}onPaste(e){var self=this;if(self.isInputHidden||self.isLocked){preventDefault(e);return}self.settings.splitOn&&setTimeout(()=>{var pastedText=self.inputValue(),splitInput;pastedText.match(self.settings.splitOn)&&(splitInput=pastedText.trim().split(self.settings.splitOn),iterate$1(splitInput,piece=>{const hash=hash_key(piece);hash&&(this.options[piece]?self.addItem(piece):self.createItem(piece))}))},0)}onKeyPress(e){var self=this,character;if(self.isLocked){preventDefault(e);return}if(character=String.fromCharCode(e.keyCode||e.which),self.settings.create&&self.settings.mode==="multi"&&character===self.settings.delimiter){self.createItem();preventDefault(e);return}}onKeyDown(e){var self=this;if(self.ignoreHover=!0,self.isLocked){e.keyCode!==KEY_TAB&&preventDefault(e);return}switch(e.keyCode){case KEY_A:if(isKeyDown(KEY_SHORTCUT,e)&&self.control_input.value==""){preventDefault(e);self.selectAll();return}break;case KEY_ESC:self.isOpen&&(preventDefault(e,!0),self.close());self.clearActiveItems();return;case KEY_DOWN:if(!self.isOpen&&self.hasOptions)self.open();else if(self.activeOption){let next=self.getAdjacent(self.activeOption,1);next&&self.setActiveOption(next)}preventDefault(e);return;case KEY_UP:if(self.activeOption){let prev=self.getAdjacent(self.activeOption,-1);prev&&self.setActiveOption(prev)}preventDefault(e);return;case KEY_RETURN:if(self.canSelect(self.activeOption)){self.onOptionSelect(e,self.activeOption);preventDefault(e)}else self.settings.create&&self.createItem()?preventDefault(e):document.activeElement==self.control_input&&self.isOpen&&preventDefault(e);return;case KEY_LEFT:self.advanceSelection(-1,e);return;case KEY_RIGHT:self.advanceSelection(1,e);return;case KEY_TAB:if(self.settings.selectOnTab){if(self.canSelect(self.activeOption)){self.onOptionSelect(e,self.activeOption);preventDefault(e)}self.settings.create&&self.createItem()&&preventDefault(e)}return;case KEY_BACKSPACE:case KEY_DELETE:self.deleteSelection(e);return}self.isInputHidden&&!isKeyDown(KEY_SHORTCUT,e)&&preventDefault(e)}onInput(){var self=this,value;self.isLocked||(value=self.inputValue(),self.lastValue!==value&&(self.lastValue=value,self.settings.shouldLoad.call(self,value)&&self.load(value),self.refreshOptions(),self.trigger("type",value)))}onOptionHover(evt,option){this.ignoreHover||this.setActiveOption(option,!1)}onFocus(e){var self=this,wasFocused=self.isFocused;if(self.isDisabled){self.blur();preventDefault(e);return}self.ignoreFocus||(self.isFocused=!0,self.settings.preload==="focus"&&self.preload(),wasFocused||self.trigger("focus"),self.activeItems.length||(self.showInput(),self.refreshOptions(!!self.settings.openOnFocus)),self.refreshState())}onBlur(){var self,deactivate;document.hasFocus()!==!1&&(self=this,self.isFocused)&&(self.isFocused=!1,self.ignoreFocus=!1,deactivate=()=>{self.close(),self.setActiveItem(),self.setCaret(self.items.length),self.trigger("blur")},self.settings.create&&self.settings.createOnBlur?self.createItem(null,deactivate):deactivate())}onOptionSelect(evt,option){var value,self=this;option.parentElement&&option.parentElement.matches("[data-disabled]")||(option.classList.contains("create")?self.createItem(null,()=>{self.settings.closeAfterSelect&&self.close()}):(value=option.dataset.value,typeof value!="undefined"&&(self.lastQuery=null,self.addItem(value),self.settings.closeAfterSelect&&self.close(),!self.settings.hideSelected&&evt.type&&/click/.test(evt.type)&&self.setActiveOption(option))))}canSelect(option){return this.isOpen&&option&&this.dropdown_content.contains(option)?!0:!1}onItemSelect(evt,item){var self=this;return!self.isLocked&&self.settings.mode==="multi"?(preventDefault(evt),self.setActiveItem(item,evt),!0):!1}canLoad(value){return this.settings.load?this.loadedSearches.hasOwnProperty(value)?!1:!0:!1}load(value){const self=this;if(self.canLoad(value)){addClasses(self.wrapper,self.settings.loadingClass);self.loading++;const callback=self.loadCallback.bind(self);self.settings.load.call(self,value,callback)}}loadCallback(options,optgroups){const self=this;self.loading=Math.max(self.loading-1,0);self.lastQuery=null;self.clearActiveOption();self.setupOptions(options,optgroups);self.refreshOptions(self.isFocused&&!self.isInputHidden);self.loading||removeClasses(self.wrapper,self.settings.loadingClass);self.trigger("load",options,optgroups)}preload(){var classList=this.wrapper.classList;classList.contains("preloaded")||(classList.add("preloaded"),this.load(""))}setTextboxValue(value=""){var input=this.control_input,changed=input.value!==value;changed&&(input.value=value,triggerEvent(input,"update"),this.lastValue=value)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(value,silent){var events=silent?[]:["change"];debounce_events(this,events,()=>{this.clear(silent),this.addItems(value,silent)})}setMaxItems(value){value===0&&(value=null);this.settings.maxItems=value;this.refreshState()}setActiveItem(item,e){var self=this,eventName,i,begin,end,swap,last;if(self.settings.mode!=="single"){if(!item){self.clearActiveItems();self.isFocused&&self.showInput();return}if(eventName=e&&e.type.toLowerCase(),eventName==="click"&&isKeyDown("shiftKey",e)&&self.activeItems.length){for(last=self.getLastActive(),begin=Array.prototype.indexOf.call(self.control.children,last),end=Array.prototype.indexOf.call(self.control.children,item),begin>end&&(swap=begin,begin=end,end=swap),i=begin;i<=end;i++)item=self.control.children[i],self.activeItems.indexOf(item)===-1&&self.setActiveItemClass(item);preventDefault(e)}else eventName==="click"&&isKeyDown(KEY_SHORTCUT,e)||eventName==="keydown"&&isKeyDown("shiftKey",e)?item.classList.contains("active")?self.removeActiveItem(item):self.setActiveItemClass(item):(self.clearActiveItems(),self.setActiveItemClass(item));self.hideInput();self.isFocused||self.focus()}}setActiveItemClass(item){const self=this,last_active=self.control.querySelector(".last-active");last_active&&removeClasses(last_active,"last-active");addClasses(item,"active last-active");self.trigger("item_select",item);self.activeItems.indexOf(item)==-1&&self.activeItems.push(item)}removeActiveItem(item){var idx=this.activeItems.indexOf(item);this.activeItems.splice(idx,1);removeClasses(item,"active")}clearActiveItems(){removeClasses(this.activeItems,"active");this.activeItems=[]}setActiveOption(option,scroll=true){option!==this.activeOption&&(this.clearActiveOption(),option)&&(this.activeOption=option,setAttr(this.focus_node,{"aria-activedescendant":option.getAttribute("id")}),setAttr(option,{"aria-selected":"true"}),addClasses(option,"active"),scroll&&this.scrollToOption(option))}scrollToOption(option,behavior){if(option){const content=this.dropdown_content,height_menu=content.clientHeight,scrollTop=content.scrollTop||0,height_item=option.offsetHeight,y=option.getBoundingClientRect().top-content.getBoundingClientRect().top+scrollTop;y+height_item>height_menu+scrollTop?this.scroll(y-height_menu+height_item,behavior):y<scrollTop&&this.scroll(y,behavior)}}scroll(scrollTop,behavior){const content=this.dropdown_content;behavior&&(content.style.scrollBehavior=behavior);content.scrollTop=scrollTop;content.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(removeClasses(this.activeOption,"active"),setAttr(this.activeOption,{"aria-selected":null}));this.activeOption=null;setAttr(this.focus_node,{"aria-activedescendant":null})}selectAll(){const self=this;if(self.settings.mode!=="single"){const activeItems=self.controlChildren();activeItems.length&&(self.hideInput(),self.close(),self.activeItems=activeItems,iterate$1(activeItems,item=>{self.setActiveItemClass(item)}))}}inputState(){var self=this;self.control.contains(self.control_input)&&(setAttr(self.control_input,{placeholder:self.settings.placeholder}),self.activeItems.length>0||!self.isFocused&&self.settings.hidePlaceholder&&self.items.length>0?(self.setTextboxValue(),self.isInputHidden=!0):(self.settings.hidePlaceholder&&self.items.length>0&&setAttr(self.control_input,{placeholder:""}),self.isInputHidden=!1),self.wrapper.classList.toggle("input-hidden",self.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var self=this;self.isDisabled||(self.ignoreFocus=!0,self.control_input.offsetWidth?self.control_input.focus():self.focus_node.focus(),setTimeout(()=>{self.ignoreFocus=!1,self.onFocus()},0))}blur(){this.focus_node.blur();this.onBlur()}getScoreFunction(query){return this.sifter.getScoreFunction(query,this.getSearchOptions())}getSearchOptions(){var settings=this.settings,sort=settings.sortField;return typeof settings.sortField=="string"&&(sort=[{field:settings.sortField}]),{fields:settings.searchField,conjunction:settings.searchConjunction,sort:sort,nesting:settings.nesting}}search(query){var result,calculateScore,self=this,options=this.getSearchOptions();if(self.settings.score&&(calculateScore=self.settings.score.call(self,query),typeof calculateScore!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return query!==self.lastQuery?(self.lastQuery=query,result=self.sifter.search(query,Object.assign(options,{score:calculateScore})),self.currentResults=result):result=Object.assign({},self.currentResults),self.settings.hideSelected&&(result.items=result.items.filter(item=>{let hashed=hash_key(item.id);return!(hashed&&self.items.indexOf(hashed)!==-1)})),result}refreshOptions(triggerDropdown=true){var i,j,k,n,optgroup,optgroups,html,has_create_option,active_group,create,self,query,add_template;const groups={},groups_order=[];self=this;query=self.inputValue();const same_query=query===self.lastQuery||query==""&&self.lastQuery==null;var results=self.search(query),active_option=null,show_dropdown=self.settings.shouldOpen||!1,dropdown_content=self.dropdown_content;for(same_query&&(active_option=self.activeOption,active_option&&(active_group=active_option.closest("[data-group]"))),n=results.items.length,typeof self.settings.maxOptions=="number"&&(n=Math.min(n,self.settings.maxOptions)),n>0&&(show_dropdown=!0),i=0;i<n;i++){let item=results.items[i];if(item){let opt_value=item.id,option=self.options[opt_value];if(option!==undefined){let opt_hash=get_hash(opt_value),option_el=self.getOption(opt_hash,!0);for(self.settings.hideSelected||option_el.classList.toggle("selected",self.items.includes(opt_hash)),optgroup=option[self.settings.optgroupField]||"",optgroups=Array.isArray(optgroup)?optgroup:[optgroup],j=0,k=optgroups&&optgroups.length;j<k;j++){optgroup=optgroups[j];self.optgroups.hasOwnProperty(optgroup)||(optgroup="");let group_fragment=groups[optgroup];group_fragment===undefined&&(group_fragment=document.createDocumentFragment(),groups_order.push(optgroup));j>0&&(option_el=option_el.cloneNode(!0),setAttr(option_el,{id:option.$id+"-clone-"+j,"aria-selected":null}),option_el.classList.add("ts-cloned"),removeClasses(option_el,"active"),self.activeOption&&self.activeOption.dataset.value==opt_value&&active_group&&active_group.dataset.group===optgroup.toString()&&(active_option=option_el));group_fragment.appendChild(option_el);groups[optgroup]=group_fragment}}}}if(self.settings.lockOptgroupOrder&&groups_order.sort((a,b)=>{const grp_a=self.optgroups[a],grp_b=self.optgroups[b],a_order=grp_a&&grp_a.$order||0,b_order=grp_b&&grp_b.$order||0;return a_order-b_order}),html=document.createDocumentFragment(),iterate$1(groups_order,optgroup=>{let group_fragment=groups[optgroup];if(group_fragment&&group_fragment.children.length){let group_heading=self.optgroups[optgroup];if(group_heading!==undefined){let group_options=document.createDocumentFragment(),header=self.render("optgroup_header",group_heading);append(group_options,header);append(group_options,group_fragment);let group_html=self.render("optgroup",{group:group_heading,options:group_options});append(html,group_html)}else append(html,group_fragment)}}),dropdown_content.innerHTML="",append(dropdown_content,html),self.settings.highlight&&(removeHighlight(dropdown_content),results.query.length&&results.tokens.length&&iterate$1(results.tokens,tok=>{highlight(dropdown_content,tok.regex)})),add_template=template=>{let content=self.render(template,{input:query});return content&&(show_dropdown=!0,dropdown_content.insertBefore(content,dropdown_content.firstChild)),content},self.loading?add_template("loading"):self.settings.shouldLoad.call(self,query)?results.items.length===0&&add_template("no_results"):add_template("not_loading"),has_create_option=self.canCreate(query),has_create_option&&(create=add_template("option_create")),self.hasOptions=results.items.length>0||has_create_option,show_dropdown){if(results.items.length>0){if(active_option||self.settings.mode!=="single"||self.items[0]==undefined||(active_option=self.getOption(self.items[0])),!dropdown_content.contains(active_option)){let active_index=0;create&&!self.settings.addPrecedence&&(active_index=1);active_option=self.selectable()[active_index]}}else create&&(active_option=create);triggerDropdown&&!self.isOpen&&(self.open(),self.scrollToOption(active_option,"auto"));self.setActiveOption(active_option)}else self.clearActiveOption(),triggerDropdown&&self.isOpen&&self.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(data,user_created=false){const self=this;if(Array.isArray(data))return self.addOptions(data,user_created),!1;const key=hash_key(data[self.settings.valueField]);return key===null||self.options.hasOwnProperty(key)?!1:(data.$order=data.$order||++self.order,data.$id=self.inputId+"-opt-"+data.$order,self.options[key]=data,self.lastQuery=null,user_created&&(self.userOptions[key]=user_created,self.trigger("option_add",key,data)),key)}addOptions(data,user_created=false){iterate$1(data,dat=>{this.addOption(dat,user_created)})}registerOption(data){return this.addOption(data)}registerOptionGroup(data){var key=hash_key(data[this.settings.optgroupValueField]);return key===null?!1:(data.$order=data.$order||++this.order,this.optgroups[key]=data,key)}addOptionGroup(id,data){var hashed_id;data[this.settings.optgroupValueField]=id;(hashed_id=this.registerOptionGroup(data))&&this.trigger("optgroup_add",hashed_id,data)}removeOptionGroup(id){this.optgroups.hasOwnProperty(id)&&(delete this.optgroups[id],this.clearCache(),this.trigger("optgroup_remove",id))}clearOptionGroups(){this.optgroups={};this.clearCache();this.trigger("optgroup_clear")}updateOption(value,data){const self=this;var item_new,index_item;const value_old=hash_key(value),value_new=hash_key(data[self.settings.valueField]);if(value_old!==null){const data_old=self.options[value_old];if(data_old!=undefined){if(typeof value_new!="string")throw new Error("Value must be set in option data");const option=self.getOption(value_old),item=self.getItem(value_old);if(data.$order=data.$order||data_old.$order,delete self.options[value_old],self.uncacheValue(value_new),self.options[value_new]=data,option){if(self.dropdown_content.contains(option)){const option_new=self._render("option",data);replaceNode(option,option_new);self.activeOption===option&&self.setActiveOption(option_new)}option.remove()}item&&(index_item=self.items.indexOf(value_old),index_item!==-1&&self.items.splice(index_item,1,value_new),item_new=self._render("item",data),item.classList.contains("active")&&addClasses(item_new,"active"),replaceNode(item,item_new));self.lastQuery=null}}}removeOption(value,silent){const self=this;value=get_hash(value);self.uncacheValue(value);delete self.userOptions[value];delete self.options[value];self.lastQuery=null;self.trigger("option_remove",value);self.removeItem(value,silent)}clearOptions(filter){const boundFilter=(filter||this.clearFilter).bind(this);this.loadedSearches={};this.userOptions={};this.clearCache();const selected={};iterate$1(this.options,(option,key)=>{boundFilter(option,key)&&(selected[key]=option)});this.options=this.sifter.items=selected;this.lastQuery=null;this.trigger("option_clear")}clearFilter(option,value){return this.items.indexOf(value)>=0?!0:!1}getOption(value,create=false){const hashed=hash_key(value);if(hashed===null)return null;const option=this.options[hashed];if(option!=undefined){if(option.$div)return option.$div;if(create)return this._render("option",option)}return null}getAdjacent(option,direction,type="option"){var self=this,all;if(!option)return null;all=type=="item"?self.controlChildren():self.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<all.length;i++)if(all[i]==option)return direction>0?all[i+1]:all[i-1];return null}getItem(item){if(typeof item=="object")return item;var value=hash_key(item);return value!==null?this.control.querySelector(`[data-value="${addSlashes(value)}"]`):null}addItems(values,silent){var self=this,items=Array.isArray(values)?values:[values];items=items.filter(x=>self.items.indexOf(x)===-1);const last_item=items[items.length-1];items.forEach(item=>{self.isPending=item!==last_item,self.addItem(item,silent)})}addItem(value,silent){var events=silent?[]:["change","dropdown_close"];debounce_events(this,events,()=>{var item,wasFull;const self=this,inputMode=self.settings.mode,hashed=hash_key(value);if((!hashed||self.items.indexOf(hashed)===-1||(inputMode==="single"&&self.close(),inputMode!=="single"&&self.settings.duplicates))&&hashed!==null&&self.options.hasOwnProperty(hashed)&&(inputMode==="single"&&self.clear(silent),inputMode!=="multi"||!self.isFull())){if(item=self._render("item",self.options[hashed]),self.control.contains(item)&&(item=item.cloneNode(!0)),wasFull=self.isFull(),self.items.splice(self.caretPos,0,hashed),self.insertAtCaret(item),self.isSetup){if(!self.isPending&&self.settings.hideSelected){let option=self.getOption(hashed),next=self.getAdjacent(option,1);next&&self.setActiveOption(next)}self.isPending||self.settings.closeAfterSelect||self.refreshOptions(self.isFocused&&inputMode!=="single");self.settings.closeAfterSelect!=!1&&self.isFull()?self.close():self.isPending||self.positionDropdown();self.trigger("item_add",hashed,item);self.isPending||self.updateOriginalInput({silent:silent})}self.isPending&&(wasFull||!self.isFull())||(self.inputState(),self.refreshState())}})}removeItem(item=null,silent){const self=this;if(item=self.getItem(item),item){var i,idx;const value=item.dataset.value;i=nodeIndex(item);item.remove();item.classList.contains("active")&&(idx=self.activeItems.indexOf(item),self.activeItems.splice(idx,1),removeClasses(item,"active"));self.items.splice(i,1);self.lastQuery=null;!self.settings.persist&&self.userOptions.hasOwnProperty(value)&&self.removeOption(value,silent);i<self.caretPos&&self.setCaret(self.caretPos-1);self.updateOriginalInput({silent:silent});self.refreshState();self.positionDropdown();self.trigger("item_remove",value,item)}}createItem(input=null,callback=()=>{}){var self,caret,output,created,create;return(arguments.length===3&&(callback=arguments[2]),typeof callback!="function"&&(callback=()=>{}),self=this,caret=self.caretPos,input=input||self.inputValue(),!self.canCreate(input))?(callback(),!1):(self.lock(),created=!1,create=data=>{if(self.unlock(),!data||typeof data!="object")return callback();var value=hash_key(data[self.settings.valueField]);if(typeof value!="string")return callback();self.setTextboxValue();self.addOption(data,!0);self.setCaret(caret);self.addItem(value);callback(data);created=!0},output=typeof self.settings.create=="function"?self.settings.create.call(this,input,create):{[self.settings.labelField]:input,[self.settings.valueField]:input},created||create(output),!0)}refreshItems(){var self=this;self.lastQuery=null;self.isSetup&&self.addItems(self.items);self.updateOriginalInput();self.refreshState()}refreshState(){const self=this;self.refreshValidityState();const isFull=self.isFull(),isLocked=self.isLocked;self.wrapper.classList.toggle("rtl",self.rtl);const wrap_classList=self.wrapper.classList;wrap_classList.toggle("focus",self.isFocused);wrap_classList.toggle("disabled",self.isDisabled);wrap_classList.toggle("required",self.isRequired);wrap_classList.toggle("invalid",!self.isValid);wrap_classList.toggle("locked",isLocked);wrap_classList.toggle("full",isFull);wrap_classList.toggle("input-active",self.isFocused&&!self.isInputHidden);wrap_classList.toggle("dropdown-active",self.isOpen);wrap_classList.toggle("has-options",isEmptyObject(self.options));wrap_classList.toggle("has-items",self.items.length>0)}refreshValidityState(){var self=this;self.input.validity&&(self.isValid=self.input.validity.valid,self.isInvalid=!self.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(opts={}){const self=this;var option,label;const empty_option=self.input.querySelector('option[value=""]');if(self.is_select_tag){const selected=[],has_selected=self.input.querySelectorAll("option:checked").length;function AddSelected(option_el,value,label){return option_el||(option_el=getDom('<option value="'+escape_html(value)+'">'+escape_html(label)+"<\/option>")),option_el!=empty_option&&self.input.append(option_el),selected.push(option_el),(option_el!=empty_option||has_selected>0)&&(option_el.selected=!0),option_el}self.input.querySelectorAll("option:checked").forEach(option_el=>{option_el.selected=!1});self.items.length==0&&self.settings.mode=="single"?AddSelected(empty_option,"",""):self.items.forEach(value=>{if(option=self.options[value],label=option[self.settings.labelField]||"",selected.includes(option.$option)){const reuse_opt=self.input.querySelector(`option[value="${addSlashes(value)}"]:not(:checked)`);AddSelected(reuse_opt,value,label)}else option.$option=AddSelected(option.$option,value,label)})}else self.input.value=self.getValue();self.isSetup&&(opts.silent||self.trigger("change",self.getValue()))}open(){var self=this;self.isLocked||self.isOpen||self.settings.mode==="multi"&&self.isFull()||(self.isOpen=!0,setAttr(self.focus_node,{"aria-expanded":"true"}),self.refreshState(),applyCSS(self.dropdown,{visibility:"hidden",display:"block"}),self.positionDropdown(),applyCSS(self.dropdown,{visibility:"visible",display:"block"}),self.focus(),self.trigger("dropdown_open",self.dropdown))}close(setTextboxValue=true){var self=this,trigger=self.isOpen;setTextboxValue&&(self.setTextboxValue(),self.settings.mode==="single"&&self.items.length&&self.hideInput());self.isOpen=!1;setAttr(self.focus_node,{"aria-expanded":"false"});applyCSS(self.dropdown,{display:"none"});self.settings.hideSelected&&self.clearActiveOption();self.refreshState();trigger&&self.trigger("dropdown_close",self.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var context=this.control,rect=context.getBoundingClientRect(),top=context.offsetHeight+rect.top+window.scrollY,left=rect.left+window.scrollX;applyCSS(this.dropdown,{width:rect.width+"px",top:top+"px",left:left+"px"})}}clear(silent){var self=this,items;self.items.length&&(items=self.controlChildren(),iterate$1(items,item=>{self.removeItem(item,!0)}),self.showInput(),silent||self.updateOriginalInput(),self.trigger("clear"))}insertAtCaret(el){const self=this,caret=self.caretPos,target=self.control;target.insertBefore(el,target.children[caret]||null);self.setCaret(caret+1)}deleteSelection(e){var direction,selection,caret,tail,self=this;direction=e&&e.keyCode===KEY_BACKSPACE?-1:1;selection=getSelection(self.control_input);const rm_items=[];if(self.activeItems.length)tail=getTail(self.activeItems,direction),caret=nodeIndex(tail),direction>0&&caret++,iterate$1(self.activeItems,item=>rm_items.push(item));else if((self.isFocused||self.settings.mode==="single")&&self.items.length){const items=self.controlChildren();let rm_item;direction<0&&selection.start===0&&selection.length===0?rm_item=items[self.caretPos-1]:direction>0&&selection.start===self.inputValue().length&&(rm_item=items[self.caretPos]);rm_item!==undefined&&rm_items.push(rm_item)}if(!self.shouldDelete(rm_items,e))return!1;for(preventDefault(e,!0),typeof caret!="undefined"&&self.setCaret(caret);rm_items.length;)self.removeItem(rm_items.pop());return self.showInput(),self.positionDropdown(),self.refreshOptions(!1),!0}shouldDelete(items,evt){const values=items.map(item=>item.dataset.value);return!values.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(values,evt)===!1?!1:!0}advanceSelection(direction,e){var last_active,adjacent,self=this;(self.rtl&&(direction*=-1),self.inputValue().length)||(isKeyDown(KEY_SHORTCUT,e)||isKeyDown("shiftKey",e)?(last_active=self.getLastActive(direction),adjacent=last_active?last_active.classList.contains("active")?self.getAdjacent(last_active,direction,"item"):last_active:direction>0?self.control_input.nextElementSibling:self.control_input.previousElementSibling,adjacent&&(adjacent.classList.contains("active")&&self.removeActiveItem(last_active),self.setActiveItemClass(adjacent))):self.moveCaret(direction))}moveCaret(){}getLastActive(direction){let last_active=this.control.querySelector(".last-active");if(last_active)return last_active;var result=this.control.querySelectorAll(".active");if(result)return getTail(result,direction)}setCaret(){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0;this.refreshState()}unlock(){this.isLocked=!1;this.refreshState()}disable(){var self=this;self.input.disabled=!0;self.control_input.disabled=!0;self.focus_node.tabIndex=-1;self.isDisabled=!0;this.close();self.lock()}enable(){var self=this;self.input.disabled=!1;self.control_input.disabled=!1;self.focus_node.tabIndex=self.tabIndex;self.isDisabled=!1;self.unlock()}destroy(){var self=this,revertSettings=self.revertSettings;self.trigger("destroy");self.off();self.wrapper.remove();self.dropdown.remove();self.input.innerHTML=revertSettings.innerHTML;self.input.tabIndex=revertSettings.tabIndex;removeClasses(self.input,"tomselected","ts-hidden-accessible");self._destroy();delete self.input.tomselect}render(templateName,data){var id,html;const self=this;if(typeof this.settings.render[templateName]!="function"||(html=self.settings.render[templateName].call(this,data,escape_html),!html))return null;if(html=getDom(html),templateName==="option"||templateName==="option_create"?data[self.settings.disabledField]?setAttr(html,{"aria-disabled":"true"}):setAttr(html,{"data-selectable":""}):templateName==="optgroup"&&(id=data.group[self.settings.optgroupValueField],setAttr(html,{"data-group":id}),data.group[self.settings.disabledField]&&setAttr(html,{"data-disabled":""})),templateName==="option"||templateName==="item"){const value=get_hash(data[self.settings.valueField]);setAttr(html,{"data-value":value});templateName==="item"?(addClasses(html,self.settings.itemClass),setAttr(html,{"data-ts-item":""})):(addClasses(html,self.settings.optionClass),setAttr(html,{role:"option",id:data.$id}),data.$div=html,self.options[value]=data)}return html}_render(templateName,data){const html=this.render(templateName,data);if(html==null)throw"HTMLElement expected";return html}clearCache(){iterate$1(this.options,option=>{option.$div&&(option.$div.remove(),delete option.$div)})}uncacheValue(value){const option_el=this.getOption(value);option_el&&option_el.remove()}canCreate(input){return this.settings.create&&input.length>0&&this.settings.createFilter.call(this,input)}hook(when,method,new_fn){var self=this,orig_method=self[method];self[method]=function(){var result,result_new;return(when==="after"&&(result=orig_method.apply(self,arguments)),result_new=new_fn.apply(self,arguments),when==="instead")?result_new:(when==="before"&&(result=orig_method.apply(self,arguments)),result)}}}return TomSelect.define("change_listener",change_listener),TomSelect.define("checkbox_options",checkbox_options),TomSelect.define("clear_button",clear_button),TomSelect.define("drag_drop",drag_drop),TomSelect.define("dropdown_header",dropdown_header),TomSelect.define("caret_position",caret_position),TomSelect.define("dropdown_input",dropdown_input),TomSelect.define("input_autogrow",input_autogrow),TomSelect.define("no_backspace_delete",no_backspace_delete),TomSelect.define("no_active_items",no_active_items),TomSelect.define("optgroup_columns",optgroup_columns),TomSelect.define("remove_button",remove_button),TomSelect.define("restore_on_backspace",restore_on_backspace),TomSelect.define("virtual_scroll",virtual_scroll),TomSelect});var tomSelect=function(el,opts){return new TomSelect(el,opts)};
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).GLightbox=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=Date.now();function l(){var e={},t=!0,i=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);for(var s=function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=l(!0,e[n],i[n]):e[n]=i[n])};i<n;i++){var o=arguments[i];s(o)}return e}function o(e,t){if((k(e)||e===window||e===document)&&(e=[e]),A(e)||L(e)||(e=[e]),0!=P(e))if(A(e)&&!L(e))for(var i=e.length,n=0;n<i&&!1!==t.call(e[n],e[n],n,e);n++);else if(L(e))for(var s in e)if(O(e,s)&&!1===t.call(e[s],e[s],s,e))break}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e[s]=e[s]||[],l={all:n,evt:null,found:null};return t&&i&&P(n)>0&&o(n,(function(e,n){if(e.eventName==t&&e.fn.toString()==i.toString())return l.found=!0,l.evt=n,!1})),l}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.onElement,n=t.withCallback,s=t.avoidDuplicate,l=void 0===s||s,a=t.once,h=void 0!==a&&a,d=t.useCapture,c=void 0!==d&&d,u=arguments.length>2?arguments[2]:void 0,g=i||[];function v(e){T(n)&&n.call(u,e,this),h&&v.destroy()}return C(g)&&(g=document.querySelectorAll(g)),v.destroy=function(){o(g,(function(t){var i=r(t,e,v);i.found&&i.all.splice(i.evt,1),t.removeEventListener&&t.removeEventListener(e,v,c)}))},o(g,(function(t){var i=r(t,e,v);(t.addEventListener&&l&&!i.found||!l)&&(t.addEventListener(e,v,c),i.all.push({eventName:e,fn:v}))})),v}function h(e,t){o(t.split(" "),(function(t){return e.classList.add(t)}))}function d(e,t){o(t.split(" "),(function(t){return e.classList.remove(t)}))}function c(e,t){return e.classList.contains(t)}function u(e,t){for(;e!==document.body;){if(!(e=e.parentElement))return!1;if("function"==typeof e.matches?e.matches(t):e.msMatchesSelector(t))return e}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||""===t)return!1;if("none"===t)return T(i)&&i(),!1;var n=x(),s=t.split(" ");o(s,(function(t){h(e,"g"+t)})),a(n,{onElement:e,avoidDuplicate:!1,once:!0,withCallback:function(e,t){o(s,(function(e){d(t,"g"+e)})),T(i)&&i()}})}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""===t)return e.style.webkitTransform="",e.style.MozTransform="",e.style.msTransform="",e.style.OTransform="",e.style.transform="",!1;e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}function f(e){e.style.display="block"}function p(e){e.style.display="none"}function m(e){var t=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=e;i.firstChild;)t.appendChild(i.firstChild);return t}function y(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function x(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}function b(e,t,i,n){if(e())t();else{var s;i||(i=100);var l=setInterval((function(){e()&&(clearInterval(l),s&&clearTimeout(s),t())}),i);n&&(s=setTimeout((function(){clearInterval(l)}),n))}}function S(e,t,i){if(I(e))console.error("Inject assets error");else if(T(t)&&(i=t,t=!1),C(t)&&t in window)T(i)&&i();else{var n;if(-1!==e.indexOf(".css")){if((n=document.querySelectorAll('link[href="'+e+'"]'))&&n.length>0)return void(T(i)&&i());var s=document.getElementsByTagName("head")[0],l=s.querySelectorAll('link[rel="stylesheet"]'),o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=e,o.media="all",l?s.insertBefore(o,l[0]):s.appendChild(o),void(T(i)&&i())}if((n=document.querySelectorAll('script[src="'+e+'"]'))&&n.length>0){if(T(i)){if(C(t))return b((function(){return void 0!==window[t]}),(function(){i()})),!1;i()}}else{var r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=function(){if(T(i)){if(C(t))return b((function(){return void 0!==window[t]}),(function(){i()})),!1;i()}},document.body.appendChild(r)}}}function w(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function T(e){return"function"==typeof e}function C(e){return"string"==typeof e}function k(e){return!(!e||!e.nodeType||1!=e.nodeType)}function E(e){return Array.isArray(e)}function A(e){return e&&e.length&&isFinite(e.length)}function L(t){return"object"===e(t)&&null!=t&&!T(t)&&!E(t)}function I(e){return null==e}function O(e,t){return null!==e&&hasOwnProperty.call(e,t)}function P(e){if(L(e)){if(e.keys)return e.keys().length;var t=0;for(var i in e)O(e,i)&&t++;return t}return e.length}function M(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!t.length)return!1;if(1==t.length)return t[0];"string"==typeof e&&(e=parseInt(e));var i=[];o(t,(function(e){i.push(e.getAttribute("data-taborder"))}));var n=Math.max.apply(Math,i.map((function(e){return parseInt(e)}))),s=e<0?1:e+1;s>n&&(s="1");var l=i.filter((function(e){return e>=parseInt(s)})),r=l.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(r,'"]'))}function X(e){if(e.events.hasOwnProperty("keyboard"))return!1;e.events.keyboard=a("keydown",{onElement:window,withCallback:function(t,i){var n=(t=t||window.event).keyCode;if(9==n){var s=document.querySelector(".gbtn.focused");if(!s){var l=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if("input"==l||"textarea"==l||"button"==l)return}t.preventDefault();var o=document.querySelectorAll(".gbtn[data-taborder]");if(!o||o.length<=0)return;if(!s){var r=z();return void(r&&(r.focus(),h(r,"focused")))}var a=z(s.getAttribute("data-taborder"));d(s,"focused"),a&&(a.focus(),h(a,"focused"))}39==n&&e.nextSlide(),37==n&&e.prevSlide(),27==n&&e.close()}})}function Y(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function q(e,t){var i=function(e,t){var i=Y(e)*Y(t);if(0===i)return 0;var n=function(e,t){return e.x*t.x+e.y*t.y}(e,t)/i;return n>1&&(n=1),Math.acos(n)}(e,t);return function(e,t){return e.x*t.y-t.x*e.y}(e,t)>0&&(i*=-1),180*i/Math.PI}var N=function(){function e(i){t(this,e),this.handlers=[],this.el=i}return n(e,[{key:"add",value:function(e){this.handlers.push(e)}},{key:"del",value:function(e){e||(this.handlers=[]);for(var t=this.handlers.length;t>=0;t--)this.handlers[t]===e&&this.handlers.splice(t,1)}},{key:"dispatch",value:function(){for(var e=0,t=this.handlers.length;e<t;e++){var i=this.handlers[e];"function"==typeof i&&i.apply(this.el,arguments)}}}]),e}();function D(e,t){var i=new N(e);return i.add(t),i}var _=function(){function e(i,n){t(this,e),this.element="string"==typeof i?document.querySelector(i):i,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var s=function(){};this.rotate=D(this.element,n.rotate||s),this.touchStart=D(this.element,n.touchStart||s),this.multipointStart=D(this.element,n.multipointStart||s),this.multipointEnd=D(this.element,n.multipointEnd||s),this.pinch=D(this.element,n.pinch||s),this.swipe=D(this.element,n.swipe||s),this.tap=D(this.element,n.tap||s),this.doubleTap=D(this.element,n.doubleTap||s),this.longTap=D(this.element,n.longTap||s),this.singleTap=D(this.element,n.singleTap||s),this.pressMove=D(this.element,n.pressMove||s),this.twoFingerPressMove=D(this.element,n.twoFingerPressMove||s),this.touchMove=D(this.element,n.touchMove||s),this.touchEnd=D(this.element,n.touchEnd||s),this.touchCancel=D(this.element,n.touchCancel||s),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}}return n(e,[{key:"start",value:function(e){if(e.touches){if(e.target&&e.target.nodeName&&["a","button","input"].indexOf(e.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",e.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(e,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var t=this.preV;if(e.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var i={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};t.x=i.x,t.y=i.y,this.pinchStartLen=Y(t),this.multipointStart.dispatch(e,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(e,this.element),this._preventTap=!0}.bind(this),750)}}}},{key:"move",value:function(e){if(e.touches){var t=this.preV,i=e.touches.length,n=e.touches[0].pageX,s=e.touches[0].pageY;if(this.isDoubleTap=!1,i>1){var l=e.touches[1].pageX,o=e.touches[1].pageY,r={x:e.touches[1].pageX-n,y:e.touches[1].pageY-s};null!==t.x&&(this.pinchStartLen>0&&(e.zoom=Y(r)/this.pinchStartLen,this.pinch.dispatch(e,this.element)),e.angle=q(r,t),this.rotate.dispatch(e,this.element)),t.x=r.x,t.y=r.y,null!==this.x2&&null!==this.sx2?(e.deltaX=(n-this.x2+l-this.sx2)/2,e.deltaY=(s-this.y2+o-this.sy2)/2):(e.deltaX=0,e.deltaY=0),this.twoFingerPressMove.dispatch(e,this.element),this.sx2=l,this.sy2=o}else{if(null!==this.x2){e.deltaX=n-this.x2,e.deltaY=s-this.y2;var a=Math.abs(this.x1-this.x2),h=Math.abs(this.y1-this.y2);(a>10||h>10)&&(this._preventTap=!0)}else e.deltaX=0,e.deltaY=0;this.pressMove.dispatch(e,this.element)}this.touchMove.dispatch(e,this.element),this._cancelLongTap(),this.x2=n,this.y2=s,i>1&&e.preventDefault()}}},{key:"end",value:function(e){if(e.changedTouches){this._cancelLongTap();var t=this;e.touches.length<2&&(this.multipointEnd.dispatch(e,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){t.swipe.dispatch(e,t.element)}),0)):(this.tapTimeout=setTimeout((function(){t._preventTap||t.tap.dispatch(e,t.element),t.isDoubleTap&&(t.doubleTap.dispatch(e,t.element),t.isDoubleTap=!1)}),0),t.isDoubleTap||(t.singleTapTimeout=setTimeout((function(){t.singleTap.dispatch(e,t.element)}),250))),this.touchEnd.dispatch(e,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(e){this.cancelAll(),this.touchCancel.dispatch(e,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(e,t,i,n){return Math.abs(e-t)>=Math.abs(i-n)?e-t>0?"Left":"Right":i-n>0?"Up":"Down"}},{key:"on",value:function(e,t){this[e]&&this[e].add(t)}},{key:"off",value:function(e,t){this[e]&&this[e].del(t)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]),e}();function W(e){var t=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}(),i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=c(e,"gslide-media")?e:e.querySelector(".gslide-media"),s=u(n,".ginner-container"),l=e.querySelector(".gslide-description");i>769&&(n=s),h(n,"greset"),v(n,"translate3d(0, 0, 0)"),a(t,{onElement:n,once:!0,withCallback:function(e,t){d(n,"greset")}}),n.style.opacity="",l&&(l.style.opacity="")}function B(e){if(e.events.hasOwnProperty("touch"))return!1;var t,i,n,s=y(),l=s.width,o=s.height,r=!1,a=null,g=null,f=null,p=!1,m=1,x=1,b=!1,S=!1,w=null,T=null,C=null,k=null,E=0,A=0,L=!1,I=!1,O={},P={},M=0,z=0,X=document.getElementById("glightbox-slider"),Y=document.querySelector(".goverlay"),q=new _(X,{touchStart:function(t){if(r=!0,(c(t.targetTouches[0].target,"ginner-container")||u(t.targetTouches[0].target,".gslide-desc")||"a"==t.targetTouches[0].target.nodeName.toLowerCase())&&(r=!1),u(t.targetTouches[0].target,".gslide-inline")&&!c(t.targetTouches[0].target.parentNode,"gslide-inline")&&(r=!1),r){if(P=t.targetTouches[0],O.pageX=t.targetTouches[0].pageX,O.pageY=t.targetTouches[0].pageY,M=t.targetTouches[0].clientX,z=t.targetTouches[0].clientY,a=e.activeSlide,g=a.querySelector(".gslide-media"),n=a.querySelector(".gslide-inline"),f=null,c(g,"gslide-image")&&(f=g.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(g=a.querySelector(".ginner-container")),d(Y,"greset"),t.pageX>20&&t.pageX<window.innerWidth-20)return;t.preventDefault()}},touchMove:function(s){if(r&&(P=s.targetTouches[0],!b&&!S)){if(n&&n.offsetHeight>o){var a=O.pageX-P.pageX;if(Math.abs(a)<=13)return!1}p=!0;var h,d=s.targetTouches[0].clientX,c=s.targetTouches[0].clientY,u=M-d,m=z-c;if(Math.abs(u)>Math.abs(m)?(L=!1,I=!0):(I=!1,L=!0),t=P.pageX-O.pageX,E=100*t/l,i=P.pageY-O.pageY,A=100*i/o,L&&f&&(h=1-Math.abs(i)/o,Y.style.opacity=h,e.settings.touchFollowAxis&&(E=0)),I&&(h=1-Math.abs(t)/l,g.style.opacity=h,e.settings.touchFollowAxis&&(A=0)),!f)return v(g,"translate3d(".concat(E,"%, 0, 0)"));v(g,"translate3d(".concat(E,"%, ").concat(A,"%, 0)"))}},touchEnd:function(){if(r){if(p=!1,S||b)return C=w,void(k=T);var t=Math.abs(parseInt(A)),i=Math.abs(parseInt(E));if(!(t>29&&f))return t<29&&i<25?(h(Y,"greset"),Y.style.opacity=1,W(g)):void 0;e.close()}},multipointEnd:function(){setTimeout((function(){b=!1}),50)},multipointStart:function(){b=!0,m=x||1},pinch:function(e){if(!f||p)return!1;b=!0,f.scaleX=f.scaleY=m*e.zoom;var t=m*e.zoom;if(S=!0,t<=1)return S=!1,t=1,k=null,C=null,w=null,T=null,void f.setAttribute("style","");t>4.5&&(t=4.5),f.style.transform="scale3d(".concat(t,", ").concat(t,", 1)"),x=t},pressMove:function(e){if(S&&!b){var t=P.pageX-O.pageX,i=P.pageY-O.pageY;C&&(t+=C),k&&(i+=k),w=t,T=i;var n="translate3d(".concat(t,"px, ").concat(i,"px, 0)");x&&(n+=" scale3d(".concat(x,", ").concat(x,", 1)")),v(f,n)}},swipe:function(t){if(!S)if(b)b=!1;else{if("Left"==t.direction){if(e.index==e.elements.length-1)return W(g);e.nextSlide()}if("Right"==t.direction){if(0==e.index)return W(g);e.prevSlide()}}}});e.events.touch=q}var H=function(){function e(i,n){var s=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t(this,e),this.img=i,this.slide=n,this.onclose=l,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",(function(e){return s.dragStart(e)}),!1),this.img.addEventListener("mouseup",(function(e){return s.dragEnd(e)}),!1),this.img.addEventListener("mousemove",(function(e){return s.drag(e)}),!1),this.img.addEventListener("click",(function(e){return s.slide.classList.contains("dragging-nav")?(s.zoomOut(),!1):s.zoomedIn?void(s.zoomedIn&&!s.dragging&&s.zoomOut()):s.zoomIn()}),!1),this.img.setZoomEvents=!0}return n(e,[{key:"zoomIn",value:function(){var e=this.widowWidth();if(!(this.zoomedIn||e<=768)){var t=this.img;if(t.setAttribute("data-style",t.getAttribute("style")),t.style.maxWidth=t.naturalWidth+"px",t.style.maxHeight=t.naturalHeight+"px",t.naturalWidth>e){var i=e/2-t.naturalWidth/2;this.setTranslate(this.img.parentNode,i,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&"function"==typeof this.onclose&&this.onclose()}},{key:"dragStart",value:function(e){e.preventDefault(),this.zoomedIn?("touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset):(this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset),e.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(e){var t=this;e.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout((function(){t.dragging=!1,t.img.isDragging=!1,t.img.classList.remove("dragging")}),100)}},{key:"drag",value:function(e){this.active&&(e.preventDefault(),"touchmove"===e.type?(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY):(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(e){if(this.zoomedIn){var t=e.clientX-this.img.naturalWidth/2,i=e.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,t,i)}}},{key:"setTranslate",value:function(e,t,i){e.style.transform="translate3d("+t+"px, "+i+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),e}(),V=function(){function e(){var i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e);var s=n.dragEl,l=n.toleranceX,o=void 0===l?40:l,r=n.toleranceY,a=void 0===r?65:r,h=n.slide,d=void 0===h?null:h,c=n.instance,u=void 0===c?null:c;this.el=s,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=o,this.toleranceY=a,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=d,this.instance=u,this.el.addEventListener("mousedown",(function(e){return i.dragStart(e)}),!1),this.el.addEventListener("mouseup",(function(e){return i.dragEnd(e)}),!1),this.el.addEventListener("mousemove",(function(e){return i.drag(e)}),!1)}return n(e,[{key:"dragStart",value:function(e){if(this.slide.classList.contains("zoomed"))this.active=!1;else{"touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset):(this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset);var t=e.target.nodeName.toLowerCase();e.target.classList.contains("nodrag")||u(e.target,".nodrag")||-1!==["input","select","textarea","button","a"].indexOf(t)?this.active=!1:(e.preventDefault(),(e.target===this.el||"img"!==t&&u(e.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=u(e.target,".ginner-container")))}}},{key:"dragEnd",value:function(e){var t=this;e&&e.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,"right"==this.doSlideChange&&this.instance.prevSlide(),"left"==this.doSlideChange&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout((function(){t.instance.preventOutsideClick=!1,t.toleranceReached=!1,t.lastDirection=null,t.dragging=!1,t.el.isDragging=!1,t.el.classList.remove("dragging"),t.slide.classList.remove("dragging-nav"),t.dragContainer.style.transform="",t.dragContainer.style.transition=""}),100)}},{key:"drag",value:function(e){if(this.active){e.preventDefault(),this.slide.classList.add("dragging-nav"),"touchmove"===e.type?(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY):(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var t=Math.abs(this.currentX),i=Math.abs(this.currentY);if(t>0&&t>=Math.abs(this.currentY)&&(!this.lastDirection||"x"==this.lastDirection)){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var n=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&n&&(this.doSlideChange=n),this.instance.settings.dragAutoSnap&&n)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),"right"==n&&this.instance.prevSlide(),void("left"==n&&this.instance.nextSlide())}if(this.toleranceY>0&&i>0&&i>=t&&(!this.lastDirection||"y"==this.lastDirection)){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var s=this.shouldClose();return!this.instance.settings.dragAutoSnap&&s&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&s&&this.instance.close())}}}},{key:"shouldChange",value:function(){var e=!1;if(Math.abs(this.currentX)>=this.toleranceX){var t=this.currentX>0?"right":"left";("left"==t&&this.slide!==this.slide.parentNode.lastChild||"right"==t&&this.slide!==this.slide.parentNode.firstChild)&&(e=t)}return e}},{key:"shouldClose",value:function(){var e=!1;return Math.abs(this.currentY)>=this.toleranceY&&(e=!0),e}},{key:"setTranslate",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.style.transition=n?"all .2s ease":"",e.style.transform="translate3d(".concat(t,"px, ").concat(i,"px, 0)")}}]),e}();function j(e,t,i,n){var s=e.querySelector(".gslide-media"),l=new Image,o="gSlideTitle_"+i,r="gSlideDesc_"+i;l.addEventListener("load",(function(){T(n)&&n()}),!1),l.src=t.href,""!=t.sizes&&""!=t.srcset&&(l.sizes=t.sizes,l.srcset=t.srcset),l.alt="",I(t.alt)||""===t.alt||(l.alt=t.alt),""!==t.title&&l.setAttribute("aria-labelledby",o),""!==t.description&&l.setAttribute("aria-describedby",r),t.hasOwnProperty("_hasCustomWidth")&&t._hasCustomWidth&&(l.style.width=t.width),t.hasOwnProperty("_hasCustomHeight")&&t._hasCustomHeight&&(l.style.height=t.height),s.insertBefore(l,s.firstChild)}function F(e,t,i,n){var s=this,l=e.querySelector(".ginner-container"),o="gvideo"+i,r=e.querySelector(".gslide-media"),a=this.getAllPlayers();h(l,"gvideo-container"),r.insertBefore(m('<div class="gvideo-wrapper"></div>'),r.firstChild);var d=e.querySelector(".gvideo-wrapper");S(this.settings.plyr.css,"Plyr");var c=t.href,u=null==t?void 0:t.videoProvider,g=!1;r.style.maxWidth=t.width,S(this.settings.plyr.js,"Plyr",(function(){if(!u&&c.match(/vimeo\.com\/([0-9]*)/)&&(u="vimeo"),!u&&(c.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||c.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||c.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/))&&(u="youtube"),"local"===u||!u){u="local";var l='<video id="'+o+'" ';l+='style="background:#000; max-width: '.concat(t.width,';" '),l+='preload="metadata" ',l+='x-webkit-airplay="allow" ',l+="playsinline ",l+="controls ",l+='class="gvideo-local">',l+='<source src="'.concat(c,'">'),g=m(l+="</video>")}var r=g||m('<div id="'.concat(o,'" data-plyr-provider="').concat(u,'" data-plyr-embed-id="').concat(c,'"></div>'));h(d,"".concat(u,"-video gvideo")),d.appendChild(r),d.setAttribute("data-id",o),d.setAttribute("data-index",i);var v=O(s.settings.plyr,"config")?s.settings.plyr.config:{},f=new Plyr("#"+o,v);f.on("ready",(function(e){a[o]=e.detail.plyr,T(n)&&n()})),b((function(){return e.querySelector("iframe")&&"true"==e.querySelector("iframe").dataset.ready}),(function(){s.resize(e)})),f.on("enterfullscreen",R),f.on("exitfullscreen",R)}))}function R(e){var t=u(e.target,".gslide-media");"enterfullscreen"===e.type&&h(t,"fullscreen"),"exitfullscreen"===e.type&&d(t,"fullscreen")}function G(e,t,i,n){var s,l=this,o=e.querySelector(".gslide-media"),r=!(!O(t,"href")||!t.href)&&t.href.split("#").pop().trim(),d=!(!O(t,"content")||!t.content)&&t.content;if(d&&(C(d)&&(s=m('<div class="ginlined-content">'.concat(d,"</div>"))),k(d))){"none"==d.style.display&&(d.style.display="block");var c=document.createElement("div");c.className="ginlined-content",c.appendChild(d),s=c}if(r){var u=document.getElementById(r);if(!u)return!1;var g=u.cloneNode(!0);g.style.height=t.height,g.style.maxWidth=t.width,h(g,"ginlined-content"),s=g}if(!s)return console.error("Unable to append inline slide content",t),!1;o.style.height=t.height,o.style.width=t.width,o.appendChild(s),this.events["inlineclose"+r]=a("click",{onElement:o.querySelectorAll(".gtrigger-close"),withCallback:function(e){e.preventDefault(),l.close()}}),T(n)&&n()}function Z(e,t,i,n){var s=e.querySelector(".gslide-media"),l=function(e){var t=e.url,i=e.allow,n=e.callback,s=e.appendTo,l=document.createElement("iframe");return l.className="vimeo-video gvideo",l.src=t,l.style.width="100%",l.style.height="100%",i&&l.setAttribute("allow",i),l.onload=function(){l.onload=null,h(l,"node-ready"),T(n)&&n()},s&&s.appendChild(l),l}({url:t.href,callback:n});s.parentNode.style.maxWidth=t.width,s.parentNode.style.height=t.height,s.appendChild(l)}var U=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},L(i)&&(this.defaults=l(this.defaults,i))}return n(e,[{key:"sourceType",value:function(e){var t=e;if(null!==(e=e.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/))return"image";if(e.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||e.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/))return"video";if(e.match(/vimeo\.com\/([0-9]*)/))return"video";if(null!==e.match(/\.(mp4|ogg|webm|mov)/))return"video";if(null!==e.match(/\.(mp3|wav|wma|aac|ogg)/))return"audio";if(e.indexOf("#")>-1&&""!==t.split("#").pop().trim())return"inline";return e.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(e,t){var i=this,n=l({descPosition:t.descPosition},this.defaults);if(L(e)&&!k(e)){O(e,"type")||(O(e,"content")&&e.content?e.type="inline":O(e,"href")&&(e.type=this.sourceType(e.href)));var s=l(n,e);return this.setSize(s,t),s}var r="",a=e.getAttribute("data-glightbox"),h=e.nodeName.toLowerCase();if("a"===h&&(r=e.href),"img"===h&&(r=e.src,n.alt=e.alt),n.href=r,o(n,(function(s,l){O(t,l)&&"width"!==l&&(n[l]=t[l]);var o=e.dataset[l];I(o)||(n[l]=i.sanitizeValue(o))})),n.content&&(n.type="inline"),!n.type&&r&&(n.type=this.sourceType(r)),I(a)){if(!n.title&&"a"==h){var d=e.title;I(d)||""===d||(n.title=d)}if(!n.title&&"img"==h){var c=e.alt;I(c)||""===c||(n.title=c)}}else{var u=[];o(n,(function(e,t){u.push(";\\s?"+t)})),u=u.join("\\s?:|"),""!==a.trim()&&o(n,(function(e,t){var s=a,l=new RegExp("s?"+t+"s?:s?(.*?)("+u+"s?:|$)"),o=s.match(l);if(o&&o.length&&o[1]){var r=o[1].trim().replace(/;\s*$/,"");n[t]=i.sanitizeValue(r)}}))}if(n.description&&"."===n.description.substring(0,1)){var g;try{g=document.querySelector(n.description).innerHTML}catch(e){if(!(e instanceof DOMException))throw e}g&&(n.description=g)}if(!n.description){var v=e.querySelector(".glightbox-desc");v&&(n.description=v.innerHTML)}return this.setSize(n,t,e),this.slideConfig=n,n}},{key:"setSize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="video"==e.type?this.checkSize(t.videosWidth):this.checkSize(t.width),s=this.checkSize(t.height);return e.width=O(e,"width")&&""!==e.width?this.checkSize(e.width):n,e.height=O(e,"height")&&""!==e.height?this.checkSize(e.height):s,i&&"image"==e.type&&(e._hasCustomWidth=!!i.dataset.width,e._hasCustomHeight=!!i.dataset.height),e}},{key:"checkSize",value:function(e){return M(e)?"".concat(e,"px"):e}},{key:"sanitizeValue",value:function(e){return"true"!==e&&"false"!==e?e:"true"===e}}]),e}(),$=function(){function e(i,n,s){t(this,e),this.element=i,this.instance=n,this.index=s}return n(e,[{key:"setContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c(t,"loaded"))return!1;var n=this.instance.settings,s=this.slideConfig,l=w();T(n.beforeSlideLoad)&&n.beforeSlideLoad({index:this.index,slide:t,player:!1});var o=s.type,r=s.descPosition,a=t.querySelector(".gslide-media"),d=t.querySelector(".gslide-title"),u=t.querySelector(".gslide-desc"),g=t.querySelector(".gdesc-inner"),v=i,f="gSlideTitle_"+this.index,p="gSlideDesc_"+this.index;if(T(n.afterSlideLoad)&&(v=function(){T(i)&&i(),n.afterSlideLoad({index:e.index,slide:t,player:e.instance.getSlidePlayerInstance(e.index)})}),""==s.title&&""==s.description?g&&g.parentNode.parentNode.removeChild(g.parentNode):(d&&""!==s.title?(d.id=f,d.innerHTML=s.title):d.parentNode.removeChild(d),u&&""!==s.description?(u.id=p,l&&n.moreLength>0?(s.smallDescription=this.slideShortDesc(s.description,n.moreLength,n.moreText),u.innerHTML=s.smallDescription,this.descriptionEvents(u,s)):u.innerHTML=s.description):u.parentNode.removeChild(u),h(a.parentNode,"desc-".concat(r)),h(g.parentNode,"description-".concat(r))),h(a,"gslide-".concat(o)),h(t,"loaded"),"video"!==o){if("external"!==o)return"inline"===o?(G.apply(this.instance,[t,s,this.index,v]),void(s.draggable&&new V({dragEl:t.querySelector(".gslide-inline"),toleranceX:n.dragToleranceX,toleranceY:n.dragToleranceY,slide:t,instance:this.instance}))):void("image"!==o?T(v)&&v():j(t,s,this.index,(function(){var i=t.querySelector("img");s.draggable&&new V({dragEl:i,toleranceX:n.dragToleranceX,toleranceY:n.dragToleranceY,slide:t,instance:e.instance}),s.zoomable&&i.naturalWidth>i.offsetWidth&&(h(i,"zoomable"),new H(i,t,(function(){e.instance.resize()}))),T(v)&&v()})));Z.apply(this,[t,s,this.index,v])}else F.apply(this.instance,[t,s,this.index,v])}},{key:"slideShortDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");n.innerHTML=e;var s=n.innerText,l=i;if((e=s.trim()).length<=t)return e;var o=e.substr(0,t-1);return l?(n=null,o+'... <a href="#" class="desc-more">'+i+"</a>"):o}},{key:"descriptionEvents",value:function(e,t){var i=this,n=e.querySelector(".desc-more");if(!n)return!1;a("click",{onElement:n,withCallback:function(e,n){e.preventDefault();var s=document.body,l=u(n,".gslide-desc");if(!l)return!1;l.innerHTML=t.description,h(s,"gdesc-open");var o=a("click",{onElement:[s,u(l,".gslide-description")],withCallback:function(e,n){"a"!==e.target.nodeName.toLowerCase()&&(d(s,"gdesc-open"),h(s,"gdesc-closed"),l.innerHTML=t.smallDescription,i.descriptionEvents(l,t),setTimeout((function(){d(s,"gdesc-closed")}),400),o.destroy())}})}})}},{key:"create",value:function(){return m(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){k(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var e=new U(this.instance.settings.slideExtraAttributes);return this.slideConfig=e.parseConfig(this.element,this.instance.settings),this.slideConfig}}]),e}(),J=w(),K=null!==w()||void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,Q=document.getElementsByTagName("html")[0],ee={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:'<div class="gslide">\n    <div class="gslide-inner-content">\n        <div class="ginner-container">\n            <div class="gslide-media">\n            </div>\n            <div class="gslide-description">\n                <div class="gdesc-inner">\n                    <h4 class="gslide-title"></h4>\n                    <div class="gslide-desc"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',lightboxHTML:'<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">\n    <div class="gloader visible"></div>\n    <div class="goverlay"></div>\n    <div class="gcontainer">\n    <div id="glightbox-slider" class="gslider"></div>\n    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>\n    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>\n    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>\n</div>\n</div>'},te=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.customOptions=i,this.settings=l(ee,i),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1}return n(e,[{key:"init",value:function(){var e=this,t=this.getSelector();t&&(this.baseEvents=a("click",{onElement:t,withCallback:function(t,i){t.preventDefault(),e.open(i)}})),this.elements=this.getElements()}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0===this.elements.length)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var i=M(t)?t:this.settings.startAt;if(k(e)){var n=e.getAttribute("data-gallery");n&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,n)),I(i)&&(i=this.getElementIndex(e))<0&&(i=0)}M(i)||(i=0),this.build(),g(this.overlay,"none"===this.settings.openEffect?"none":this.settings.cssEfects.fade.in);var s=document.body,l=window.innerWidth-document.documentElement.clientWidth;if(l>0){var o=document.createElement("style");o.type="text/css",o.className="gcss-styles",o.innerText=".gscrollbar-fixer {margin-right: ".concat(l,"px}"),document.head.appendChild(o),h(s,"gscrollbar-fixer")}h(s,"glightbox-open"),h(Q,"glightbox-open"),J&&(h(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(i,!0),1===this.elements.length?(h(this.prevButton,"glightbox-button-hidden"),h(this.nextButton,"glightbox-button-hidden")):(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),T(this.settings.onOpen)&&this.settings.onOpen(),K&&this.settings.touchNavigation&&B(this),this.settings.keyboardNavigation&&X(this)}},{key:"openAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.open(null,e)}},{key:"showSlide",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(this.loader),this.index=parseInt(t);var n=this.slidesContainer.querySelector(".current");n&&d(n,"current"),this.slideAnimateOut();var s=this.slidesContainer.querySelectorAll(".gslide")[t];if(c(s,"loaded"))this.slideAnimateIn(s,i),p(this.loader);else{f(this.loader);var l=this.elements[t],o={index:this.index,slide:s,slideNode:s,slideConfig:l.slideConfig,slideIndex:this.index,trigger:l.node,player:null};this.trigger("slide_before_load",o),l.instance.setContent(s,(function(){p(e.loader),e.resize(),e.slideAnimateIn(s,i),e.trigger("slide_after_load",o)}))}this.slideDescription=s.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&c(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(t+1),this.preloadSlide(t-1)),this.updateNavigationClasses(),this.activeSlide=s}},{key:"preloadSlide",value:function(e){var t=this;if(e<0||e>this.elements.length-1)return!1;if(I(this.elements[e]))return!1;var i=this.slidesContainer.querySelectorAll(".gslide")[e];if(c(i,"loaded"))return!1;var n=this.elements[e],s=n.type,l={index:e,slide:i,slideNode:i,slideConfig:n.slideConfig,slideIndex:e,trigger:n.node,player:null};this.trigger("slide_before_load",l),"video"===s||"external"===s?setTimeout((function(){n.instance.setContent(i,(function(){t.trigger("slide_after_load",l)}))}),200):n.instance.setContent(i,(function(){t.trigger("slide_after_load",l)}))}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(e<0||e>this.elements.length-1))return!1;e<0?e=this.elements.length-1:e>=this.elements.length&&(e=0),this.showSlide(e)}},{key:"insertSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t<0&&(t=this.elements.length);var i=new $(e,this,t),n=i.getConfig(),s=l({},n),o=i.create(),r=this.elements.length-1;s.index=t,s.node=!1,s.instance=i,s.slideConfig=n,this.elements.splice(t,0,s);var a=null,h=null;if(this.slidesContainer){if(t>r)this.slidesContainer.appendChild(o);else{var d=this.slidesContainer.querySelectorAll(".gslide")[t];this.slidesContainer.insertBefore(o,d)}(this.settings.preload&&0==this.index&&0==t||this.index-1==t||this.index+1==t)&&this.preloadSlide(t),0===this.index&&0===t&&(this.index=1),this.updateNavigationClasses(),a=this.slidesContainer.querySelectorAll(".gslide")[t],h=this.getSlidePlayerInstance(t),s.slideNode=a}this.trigger("slide_inserted",{index:t,slide:a,slideNode:a,slideConfig:n,slideIndex:t,trigger:null,player:h}),T(this.settings.slideInserted)&&this.settings.slideInserted({index:t,slide:a,player:h})}},{key:"removeSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0||e>this.elements.length-1)return!1;var t=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[e];t&&(this.getActiveSlideIndex()==e&&(e==this.elements.length-1?this.prevSlide():this.nextSlide()),t.parentNode.removeChild(t)),this.elements.splice(e,1),this.trigger("slide_removed",e),T(this.settings.slideRemoved)&&this.settings.slideRemoved(e)}},{key:"slideAnimateIn",value:function(e,t){var i=this,n=e.querySelector(".gslide-media"),s=e.querySelector(".gslide-description"),l={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},o={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(n.offsetWidth>0&&s&&(p(s),s.style.display=""),d(e,this.effectsClasses),t)g(e,this.settings.cssEfects[this.settings.openEffect].in,(function(){i.settings.autoplayVideos&&i.slidePlayerPlay(e),i.trigger("slide_changed",{prev:l,current:o}),T(i.settings.afterSlideChange)&&i.settings.afterSlideChange.apply(i,[l,o])}));else{var r=this.settings.slideEffect,a="none"!==r?this.settings.cssEfects[r].in:r;this.prevActiveSlideIndex>this.index&&"slide"==this.settings.slideEffect&&(a=this.settings.cssEfects.slideBack.in),g(e,a,(function(){i.settings.autoplayVideos&&i.slidePlayerPlay(e),i.trigger("slide_changed",{prev:l,current:o}),T(i.settings.afterSlideChange)&&i.settings.afterSlideChange.apply(i,[l,o])}))}setTimeout((function(){i.resize(e)}),100),h(e,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var e=this.prevActiveSlide;d(e,this.effectsClasses),h(e,"prev");var t=this.settings.slideEffect,i="none"!==t?this.settings.cssEfects[t].out:t;this.slidePlayerPause(e),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),T(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&"slide"==this.settings.slideEffect&&(i=this.settings.cssEfects.slideBack.out),g(e,i,(function(){var t=e.querySelector(".ginner-container"),i=e.querySelector(".gslide-media"),n=e.querySelector(".gslide-description");t.style.transform="",i.style.transform="",d(i,"greset"),i.style.opacity="",n&&(n.style.opacity=""),d(e,"prev")}))}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(e){var t="gvideo"+e,i=this.getAllPlayers();return!(!O(i,t)||!i[t])&&i[t]}},{key:"stopSlideVideo",value:function(e){if(k(e)){var t=e.querySelector(".gvideo-wrapper");t&&(e=t.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var i=this.getSlidePlayerInstance(e);i&&i.playing&&i.pause()}},{key:"slidePlayerPause",value:function(e){if(k(e)){var t=e.querySelector(".gvideo-wrapper");t&&(e=t.getAttribute("data-index"))}var i=this.getSlidePlayerInstance(e);i&&i.playing&&i.pause()}},{key:"playSlideVideo",value:function(e){if(k(e)){var t=e.querySelector(".gvideo-wrapper");t&&(e=t.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var i=this.getSlidePlayerInstance(e);i&&!i.playing&&i.play()}},{key:"slidePlayerPlay",value:function(e){var t;if(!J||null!==(t=this.settings.plyr.config)&&void 0!==t&&t.muted){if(k(e)){var i=e.querySelector(".gvideo-wrapper");i&&(e=i.getAttribute("data-index"))}var n=this.getSlidePlayerInstance(e);n&&!n.playing&&(n.play(),this.settings.autofocusVideos&&n.elements.container.focus())}}},{key:"setElements",value:function(e){var t=this;this.settings.elements=!1;var i=[];e&&e.length&&o(e,(function(e,n){var s=new $(e,t,n),o=s.getConfig(),r=l({},o);r.slideConfig=o,r.instance=s,r.index=n,i.push(r)})),this.elements=i,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(o(this.elements,(function(){var e=m(t.settings.slideHTML);t.slidesContainer.appendChild(e)})),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(e){var t=!1;return o(this.elements,(function(i,n){if(O(i,"node")&&i.node==e)return t=n,!0})),t}},{key:"getElements",value:function(){var e=this,t=[];this.elements=this.elements?this.elements:[],!I(this.settings.elements)&&E(this.settings.elements)&&this.settings.elements.length&&o(this.settings.elements,(function(i,n){var s=new $(i,e,n),o=s.getConfig(),r=l({},o);r.node=!1,r.index=n,r.instance=s,r.slideConfig=o,t.push(r)}));var i=!1;return this.getSelector()&&(i=document.querySelectorAll(this.getSelector())),i?(o(i,(function(i,n){var s=new $(i,e,n),o=s.getConfig(),r=l({},o);r.node=i,r.index=n,r.instance=s,r.slideConfig=o,r.gallery=i.getAttribute("data-gallery"),t.push(r)})),t):t}},{key:"getGalleryElements",value:function(e,t){return e.filter((function(e){return e.gallery==t}))}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&"data-"==this.settings.selector.substring(0,5)?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var e=[];for(var t in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(t)){var i=this.settings.cssEfects[t];e.push("g".concat(i.in)),e.push("g".concat(i.out))}return e.join(" ")}},{key:"build",value:function(){var e=this;if(this.built)return!1;var t=document.body.childNodes,i=[];o(t,(function(e){e.parentNode==document.body&&"#"!==e.nodeName.charAt(0)&&e.hasAttribute&&!e.hasAttribute("aria-hidden")&&(i.push(e),e.setAttribute("aria-hidden","true"))}));var n=O(this.settings.svg,"next")?this.settings.svg.next:"",s=O(this.settings.svg,"prev")?this.settings.svg.prev:"",l=O(this.settings.svg,"close")?this.settings.svg.close:"",r=this.settings.lightboxHTML;r=m(r=(r=(r=r.replace(/{nextSVG}/g,n)).replace(/{prevSVG}/g,s)).replace(/{closeSVG}/g,l)),document.body.appendChild(r);var d=document.getElementById("glightbox-body");this.modal=d;var g=d.querySelector(".gclose");this.prevButton=d.querySelector(".gprev"),this.nextButton=d.querySelector(".gnext"),this.overlay=d.querySelector(".goverlay"),this.loader=d.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=i,this.events={},h(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&g&&(this.events.close=a("click",{onElement:g,withCallback:function(t,i){t.preventDefault(),e.close()}})),g&&!this.settings.closeButton&&g.parentNode.removeChild(g),this.nextButton&&(this.events.next=a("click",{onElement:this.nextButton,withCallback:function(t,i){t.preventDefault(),e.nextSlide()}})),this.prevButton&&(this.events.prev=a("click",{onElement:this.prevButton,withCallback:function(t,i){t.preventDefault(),e.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=a("click",{onElement:d,withCallback:function(t,i){e.preventOutsideClick||c(document.body,"glightbox-mobile")||u(t.target,".ginner-container")||u(t.target,".gbtn")||c(t.target,"gnext")||c(t.target,"gprev")||e.close()}})),o(this.elements,(function(t,i){e.slidesContainer.appendChild(t.instance.create()),t.slideNode=e.slidesContainer.querySelectorAll(".gslide")[i]})),K&&h(document.body,"glightbox-touch"),this.events.resize=a("resize",{onElement:window,withCallback:function(){e.resize()}}),this.built=!0}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((e=e||this.activeSlide)&&!c(e,"zoomed")){var t=y(),i=e.querySelector(".gvideo-wrapper"),n=e.querySelector(".gslide-image"),s=this.slideDescription,l=t.width,o=t.height;if(l<=768?h(document.body,"glightbox-mobile"):d(document.body,"glightbox-mobile"),i||n){var r=!1;if(s&&(c(s,"description-bottom")||c(s,"description-top"))&&!c(s,"gabsolute")&&(r=!0),n)if(l<=768)n.querySelector("img");else if(r){var a=s.offsetHeight,u=n.querySelector("img");u.setAttribute("style","max-height: calc(100vh - ".concat(a,"px)")),s.setAttribute("style","max-width: ".concat(u.offsetWidth,"px;"))}if(i){var g=O(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!g){var v=i.clientWidth,f=i.clientHeight,p=v/f;g="".concat(v/p,":").concat(f/p)}var m=g.split(":"),x=this.settings.videosWidth,b=this.settings.videosWidth,S=(b=M(x)||-1!==x.indexOf("px")?parseInt(x):-1!==x.indexOf("vw")?l*parseInt(x)/100:-1!==x.indexOf("vh")?o*parseInt(x)/100:-1!==x.indexOf("%")?l*parseInt(x)/100:parseInt(i.clientWidth))/(parseInt(m[0])/parseInt(m[1]));if(S=Math.floor(S),r&&(o-=s.offsetHeight),b>l||S>o||o<S&&l>b){var w=i.offsetWidth,T=i.offsetHeight,C=o/T,k={width:w*C,height:T*C};i.parentNode.setAttribute("style","max-width: ".concat(k.width,"px")),r&&s.setAttribute("style","max-width: ".concat(k.width,"px;"))}else i.parentNode.style.maxWidth="".concat(x),r&&s.setAttribute("style","max-width: ".concat(x,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var e=this.loop();d(this.nextButton,"disabled"),d(this.prevButton,"disabled"),0==this.index&&this.elements.length-1==0?(h(this.prevButton,"disabled"),h(this.nextButton,"disabled")):0!==this.index||e?this.index!==this.elements.length-1||e||h(this.nextButton,"disabled"):h(this.prevButton,"disabled")}},{key:"loop",value:function(){var e=O(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return e=O(this.settings,"loop")?this.settings.loop:e,e}},{key:"close",value:function(){var e=this;if(!this.lightboxOpen){if(this.events){for(var t in this.events)this.events.hasOwnProperty(t)&&this.events[t].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&o(this.bodyHiddenChildElms,(function(e){e.removeAttribute("aria-hidden")})),h(this.modal,"glightbox-closing"),g(this.overlay,"none"==this.settings.openEffect?"none":this.settings.cssEfects.fade.out),g(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,(function(){if(e.activeSlide=null,e.prevActiveSlideIndex=null,e.prevActiveSlide=null,e.built=!1,e.events){for(var t in e.events)e.events.hasOwnProperty(t)&&e.events[t].destroy();e.events=null}var i=document.body;d(Q,"glightbox-open"),d(i,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),e.modal.parentNode.removeChild(e.modal),e.trigger("close"),T(e.settings.onClose)&&e.settings.onClose();var n=document.querySelector(".gcss-styles");n&&n.parentNode.removeChild(n),e.lightboxOpen=!1,e.closing=null}))}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!T(t))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:e,once:i,callback:t})}},{key:"once",value:function(e,t){this.on(e,t,!0)}},{key:"trigger",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];o(this.apiEvents,(function(t,s){var l=t.evt,o=t.once,r=t.callback;l==e&&(r(i),o&&n.push(s))})),n.length&&o(n,(function(e){return t.apiEvents.splice(e,1)}))}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.1.0"}}]),e}();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new te(e);return t.init(),t}}));;
(function(){"use strict";function dataLayerPush(eventName,data,count){if(typeof dataLayer!="undefined"&&dataLayer){const culture=document.getElementsByTagName("html")[0].getAttribute("lang");let model={culture:culture};data&&(model.job_title=data.title,model.job_id=data.id);count&&(model.total_jobs=count);dataLayer.push({event:eventName,event_model:model});debugLog(model,eventName)}}function trackExternalApply(id){const xhr=configurePostRequest("TrackApply"),formData=new FormData;formData.append("id",id);xhr.send(formData);debugLog(id,"Track Apply")}function debugLog(data,title){debugMode&&data&&(title?console.log(title,data):console.log(data))}const debugMode=!1,apiBaseUrl="/JobsApi/",savedJobCountElement=document.getElementById("js-saved-job-count"),savedJobCountPageElement=document.getElementById("js-saved-job-page-count"),noSavedJobsElement=document.getElementById("js-no-saved-jobs"),savedJobsElement=document.getElementById("js-saved-jobs"),btnRemoveAllJobs=document.getElementById("btn-remove-all-jobs"),externalApplyButton=document.getElementById("js-apply-external"),addJobClass="btn-add-job",removeJobClass="btn-remove-job",hideCss="d-none",showCss="d-block",hide=function(el){el&&(el.classList.remove(showCss),el.classList.add(hideCss),el.setAttribute("hidden","hidden"))},show=function(el){el&&(el.classList.remove(hideCss),el.classList.add(showCss),el.removeAttribute("hidden"))},registerClickHandlerForClass=function(css,func){const elems=document.getElementsByClassName(css);if(elems.length>0)for(let i=0;i<elems.length;i++)elems[i].addEventListener("click",func,!1)},getClosestJobElem=function(elem){return elem.closest(".js-job")},getClosestJobId=function(elem){const closestJob=getClosestJobElem(elem);return closestJob?{id:closestJob.getAttribute("data-id"),title:closestJob.getAttribute("data-jobtitle")}:null},getSavedJobIdsPromise=function(){return new Promise(function(fulfill,reject){const getJobsApiUrl=apiBaseUrl+"GetSavedJobs",xmlhttp=new XMLHttpRequest;xmlhttp.open("GET",getJobsApiUrl,!0);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){const obj=JSON.parse(xmlhttp.responseText);fulfill(obj)}}else reject()};xmlhttp.send()})},displaySavedJobCount=function(){getSavedJobIdsPromise().then(function(jobs){displayJobCount(jobs.length)})},displayJobCount=function(savedJobCount){savedJobCountElement&&(savedJobCountElement.innerText=savedJobCount);savedJobCountPageElement&&(savedJobCountPageElement.innerText=savedJobCount);savedJobCount>0?(hide(noSavedJobsElement),show(savedJobsElement),show(btnRemoveAllJobs)):(show(noSavedJobsElement),hide(savedJobsElement),hide(btnRemoveAllJobs));debugLog(savedJobCount,"Saved Job Count")},configurePostRequest=function(name){const xhr=new XMLHttpRequest;return xhr.open("POST",apiBaseUrl+name,!0),debugLog(apiBaseUrl+name),xhr.setRequestHeader("x-ph","internal"),xhr},saveJobId=function(id,callback){const xhr=configurePostRequest("SaveJob");xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){const data=xhr.responseText;displayJobCount(data);callback&&callback(data)}};const formData=new FormData;formData.append("id",id);xhr.send(formData);debugLog(id,"Save Job")},removeJobId=function(id,callback){const xhr=configurePostRequest("RemoveJob");xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){const data=xhr.responseText;displayJobCount(data);callback&&callback(data)}};const formData=new FormData;formData.append("id",id);xhr.send(formData);debugLog(id,"Remove Job")},addJob=function(elem){const data=getClosestJobId(elem);if(data===null){console.log("Could not get job Id when btn-add-job clicked!");return}saveJobId(data.id);hide(elem);show(elem.nextElementSibling);dataLayerPush("job_save",data);debugLog(data,"Add Job")},addJobButtonClick=function(e){e.stopPropagation();e.preventDefault();addJob(this)};registerClickHandlerForClass(addJobClass,addJobButtonClick);const removeJob=function(elem){const data=getClosestJobId(elem);if(data===null){console.log("Could not get job Id when btn-add-job clicked!");return}removeJobId(data.id);hide(elem);show(elem.previousElementSibling);dataLayerPush("job_unsave",data);debugLog(data,"Remove Job")},removeJobButtonClick=function(e){e.stopPropagation();e.preventDefault();removeJob(this)};registerClickHandlerForClass(removeJobClass,removeJobButtonClick);const deleteJobButtonClick=function(e){e.stopPropagation();e.preventDefault();const job=getClosestJobElem(this);if(!job){console.log("Could not get job when btn-remove-job clicked!");return}const data=getClosestJobId(this);dataLayerPush("job_unsave",data);removeJobId(data.id,function(cnt){cnt>0?hide(noSavedJobsElement):show(savedJobsElement);job.remove()});debugLog(data,"Delete Job")};registerClickHandlerForClass("btn-delete-job",deleteJobButtonClick);const deleteAllJobs=function(){const xhr=configurePostRequest("RemoveAllJobs");xhr.onreadystatechange=function(){xhr.readyState===4&&xhr.status===200&&(hide(document.getElementById("js-job-list")),displayJobCount(0))};xhr.send();debugLog("Remove All Jobs");const removedCount=document.querySelectorAll("#js-job-list .js-job").length;dataLayerPush("job_remove_all",null,removedCount)};btnRemoveAllJobs&&btnRemoveAllJobs.addEventListener("click",deleteAllJobs);const containers=document.getElementsByClassName("js-live-job-results");containers&&addEventListener("click",function(e){const button=e.target.closest("button");button&&(button.classList.contains(addJobClass)?addJob(button):button.classList.contains(removeJobClass)&&removeJob(button))},!1);externalApplyButton&&externalApplyButton.addEventListener("click",function(){const jobElem=document.getElementsByClassName("js-job")[0];if(console.log(jobElem),jobElem){const jobId=jobElem.getAttribute("data-id");jobId&&trackExternalApply(jobId)}},!1)})();
"use strict";window.addEventListener("DOMContentLoaded",()=>{function findAncestorWithClass(element,className){let currentElement=element.parentElement;while(currentElement){if(currentElement.classList.contains(className))return currentElement;currentElement=currentElement.parentElement}return null}function toggleScrollClass(){let screenWidth=window.innerWidth;var header=document.querySelector(".header:not(.header-simple)");header&&(window.scrollY>120&&screenWidth>=992?header.classList.add("is-scrolling"):screenWidth>=992?header.classList.remove("is-scrolling"):screenWidth<992&&header.classList.add("is-scrolling"))}function handleCollapseShown(event){var current=event.target,topOffset=current.getBoundingClientRect().top+window.pageYOffset-200;window.scrollTo({top:topOffset,behavior:"smooth"})}function initializeSwiper(){let screenWidth=window.innerWidth;const mobileCarousels=document.querySelectorAll("body:not(.js-template-teamListing):not(.js-template-locationListing):not(.js-template-blogPost) .swiper-mobile");mobileCarousels.forEach(function(mobileCarousel){let swiperInstance=mobileCarousel.swiper;if(screenWidth<768&&swiperInstance===undefined){let mobileSwiper=new Swiper(mobileCarousel,{spaceBetween:18,slidesPerView:1,pagination:{el:mobileCarousel.querySelector(".swiper-pagination"),clickable:!0},slideClass:"swiper-item",wrapperClass:"swiper-container"})}else screenWidth>=768&&swiperInstance!==undefined&&swiperInstance!==null&&swiperInstance.destroy()})}function tabIndex(){var remove=document.querySelectorAll(".remove");remove.length>0&&remove.forEach(rem=>{const parentDataValue=rem.parentElement.getAttribute("data-value");rem.tabIndex="0";parentDataValue!==null&&rem.setAttribute("aria-label","Delete "+parentDataValue)})}function findTitleHeight(cardTitles){let maxHeight=0;return cardTitles.forEach(title=>{const titleHeight=title.clientHeight;titleHeight>maxHeight&&(maxHeight=titleHeight)}),maxHeight}function updateStickyPosition(){var contentHeight=document.querySelector(".js-template-job .hero").offsetHeight,scrollTop=window.pageYOffset||document.documentElement.scrollTop;scrollTop>=contentHeight?stickyElement.classList.add("stuck"):stickyElement.classList.remove("stuck")}var collapseElements,toTops,stickyElement;const rootStyles=getComputedStyle(document.documentElement),nav=document.getElementById("js-nav"),header=document.getElementById("header");nav&&header&&(nav.addEventListener("show.bs.offcanvas",function(){header.classList.add("is-takeover-nav")}),nav.addEventListener("hide.bs.offcanvas",function(){header.classList.remove("is-takeover-nav")}));toggleScrollClass();window.addEventListener("scroll",toggleScrollClass);window.addEventListener("resize",toggleScrollClass);const dropdownLinks=document.querySelectorAll(".navbar-nav .dropdown-toggle:not(.btn)");dropdownLinks.forEach(function(link){link.addEventListener("click",function(){window.matchMedia("(min-width: 992px)").matches&&(header.classList.contains("is-scrolling")?link.nextElementSibling.querySelector(".d-lg-none").classList.remove("d-lg-none"):window.location=link.href)});link.addEventListener("mouseover",function(){window.matchMedia("(min-width: 992px)").matches&&(header.classList.contains("is-scrolling")||link.nextElementSibling.querySelector("li:first-of-type").classList.add("d-lg-none"))})});const teamAccordionSections=document.querySelectorAll(".section-teams-accordion");teamAccordionSections.forEach(function(section){function updateImage(element){var teamImagePath=element.getAttribute("data-img-source");teamImagePath&&(teamImg.src=teamImagePath,pictureElementSource.srcset=teamImagePath)}const teamImagePictureElement=section.querySelector(".team-image picture"),pictureElementSource=teamImagePictureElement.querySelector("source"),teamImg=teamImagePictureElement.querySelector("img");var teamImageSRCs=section.querySelectorAll(".card-team .btn");teamImageSRCs.forEach(function(src){src.addEventListener("mouseover",function(){updateImage(this)});src.addEventListener("focus",function(){updateImage(this)});src.addEventListener("touchstart",function(){updateImage(this)});src.addEventListener("click",function(){updateImage(this)})})});const contentTable=document.querySelectorAll(".cms-content table");contentTable.forEach(function(table){table.classList.add("table");let wrapper=document.createElement("div");wrapper.classList.add("table-responsive");table.parentNode.insertBefore(wrapper,table);wrapper.appendChild(table)});const hash=window.location.hash.substring(1);hash.length&&hash.lastIndexOf("collapse",0)===0&&(document.getElementById(hash).classList.add("show"),document.querySelector('.accordion-button[data-bs-target="#'+hash+'"]').classList.remove("collapsed"));collapseElements=document.querySelectorAll(".accordion:not(.non-focus-accordion) .collapse");collapseElements.forEach(function(collapse){collapse.addEventListener("shown.bs.collapse",handleCollapseShown)});const siteAlert=document.getElementById("js-sitealert");siteAlert&&(siteAlert.addEventListener("closed.bs.alert",function(){Cookies.set("alert","1",{sameSite:"strict",secure:!0})}),Cookies.get("alert")&&(siteAlert.style.display="none"));const carouselGutterPX=rootStyles.getPropertyValue("--carouselGutter").trim(),carouselGutter=parseInt(carouselGutterPX,10),carouselGutterSmPX=rootStyles.getPropertyValue("--carouselGutterSm").trim(),carouselGutterSm=parseInt(carouselGutterSmPX,10),carousels=document.querySelectorAll(".swiper-carousel");carousels.forEach(function(carousel){const swiper=new Swiper(carousel,{spaceBetween:24,pagination:{el:carousel.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:carousel.querySelector(".swiper-button-next"),prevEl:carousel.querySelector(".swiper-button-prev")},grabCursor:!0,breakpoints:{992:{spaceBetween:40}},slideClass:"swiper-item",wrapperClass:"swiper-container"})});const testimonials=document.querySelectorAll(".swiper-testimonial");testimonials.forEach(function(testimonial){const swiper=new Swiper(testimonial,{spaceBetween:24,pagination:{el:testimonial.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:testimonial.querySelector(".swiper-button-next"),prevEl:testimonial.querySelector(".swiper-button-prev")},grabCursor:!0,breakpoints:{992:{spaceBetween:40}},slideClass:"swiper-item",wrapperClass:"swiper-container"})});const carouselsHalfWidth=document.querySelectorAll(".swiper-carousel-half-width");carouselsHalfWidth.forEach(function(carousel){const prev=carousel.previousElementSibling.querySelector(".swiper-button-prev"),next=carousel.previousElementSibling.querySelector(".swiper-button-next"),ancestorWithClass=findAncestorWithClass(carousel,"row"),swiper=new Swiper(carousel,{spaceBetween:carouselGutterSm,initialSlide:0,grabCursor:!0,slidesPerView:1.25,loop:!0,centeredSlides:!0,slidesOffsetBefore:0,navigation:{nextEl:next,prevEl:prev},breakpoints:{576:{slidesPerView:1.25,centeredSlides:!0},768:{slidesPerView:2.5,centeredSlides:!0},992:{slidesPerView:1.5,spaceBetween:carouselGutter,centeredSlides:!0},1200:{slidesPerView:2.5,spaceBetween:carouselGutter,centeredSlides:!0}},slideClass:"swiper-item",wrapperClass:"swiper-container",on:{init:function(){const sliderParent=this.el.parentElement.parentElement.parentElement,slidesPerView=this.params.slidesPerView,totalSlides=this.slides.length;let difference=Math.abs(totalSlides-slidesPerView);difference<=.5?(this.params.slidesPerView=totalSlides+1,this.params.noSwipingClass="swiper-item",this.params.centeredSlides=!1,sliderParent.classList.remove("sufficient-slides"),sliderParent.classList.add("insufficient-slides")):difference>=.5&&totalSlides>slidesPerView?(sliderParent.classList.remove("insufficient-slides"),sliderParent.classList.add("sufficient-slides")):(this.params.noSwipingClass="swiper-item",this.params.centeredSlides=!1,sliderParent.classList.remove("sufficient-slides"),sliderParent.classList.add("insufficient-slides"));totalSlides===1?sliderParent.classList.add("column-1"):totalSlides===2?sliderParent.classList.add("column-2"):totalSlides===3&&sliderParent.classList.add("column-3")},resize:function(){const sliderParent=this.el.parentElement.parentElement.parentElement,slidesPerView=this.params.slidesPerView,totalSlides=this.slides.length;let difference=Math.abs(totalSlides-slidesPerView);difference<=.5?(this.params.slidesPerView=totalSlides+1,this.params.noSwipingClass="swiper-item",this.params.centeredSlides=!1,sliderParent.classList.remove("sufficient-slides"),sliderParent.classList.add("insufficient-slides")):difference>=.5&&totalSlides>slidesPerView?(sliderParent.classList.remove("insufficient-slides"),sliderParent.classList.add("sufficient-slides")):(this.params.noSwipingClass="swiper-item",this.params.centeredSlides=!1,sliderParent.classList.remove("sufficient-slides"),sliderParent.classList.add("insufficient-slides"));totalSlides===1?sliderParent.classList.add("column-1"):totalSlides===2?sliderParent.classList.add("column-2"):totalSlides===3&&sliderParent.classList.add("column-3")}}})});initializeSwiper();window.addEventListener("resize",function(){initializeSwiper()});const multiSelects=document.querySelectorAll(".js-select");multiSelects.forEach(el=>new TomSelect(el,{plugins:{remove_button:{title:"Remove",label:'<span class="remove-inner"><span class="visually-hidden">Remove<\/span><\/span>'}},onItemAdd:function(){this.setTextboxValue("");this.refreshOptions();tabIndex()},maxOptions:null}));tabIndex();const lightbox=GLightbox({touchNavigation:!0,autoplayVideos:!0,autofocusVideo:!0,plyr:{config:{captions:{active:!0,language:"auto",update:!1},youtube:{cc_load_policy:1}}}}),allVideos=document.querySelectorAll(".js-video");allVideos.forEach(function(singleVideo){singleVideo.addEventListener("click",function(e){e.preventDefault();let targetHref=this.getAttribute("href");lightbox.setElements([{href:targetHref}]);lightbox.open()})});const videoBtns=document.querySelectorAll(".js-video-control");videoBtns.forEach(videoBtn=>{let parent=videoBtn.parentElement;parent.classList.contains("outer-wrap")&&(parent=videoBtn.parentElement.parentElement);parent.classList.contains("button-fade-in")&&(parent=videoBtn.parentElement.parentElement);const video=parent.querySelector("video"),buttonText=videoBtn.querySelector(".visually-hidden"),toggleVideo=()=>{video.paused?(video.play(),parent.classList.remove("paused"),buttonText.innerText=videoBtn.dataset.pause):(video.pause(),parent.classList.add("paused"),buttonText.innerText=videoBtn.dataset.play)};videoBtn.addEventListener("click",toggleVideo)});let figures=document.querySelectorAll(".cms-content figure:not(.blockquote-outer)");figures.forEach(function(figure){if(figure){let float=figure.querySelector("img").style.float,display=figure.querySelector("img").style.display;float=="left"&&figure.classList.add("float-start");float=="right"&&figure.classList.add("float-end");display=="block"&&figure.classList.add("center")}});const ranges=document.querySelectorAll("input[type=range]"),rangeProgressColour=rootStyles.getPropertyValue("--rangeProgressColour").trim(),rangeTrackColour=rootStyles.getPropertyValue("--rangeTrackColour").trim(),radius=document.querySelector(".radius");ranges.forEach(function(range){function handleRangeInput(e){const progress=e/range.max*100;range.style.background=`linear-gradient(to right, ${rangeProgressColour} ${progress}%, ${rangeTrackColour} ${progress}%)`}const rangeValue=range.value;range.addEventListener("input",event=>{const rangeValueEvent=event.target.value;handleRangeInput(rangeValueEvent)});handleRangeInput(rangeValue);range.oninput=function(){radius.innerHTML=this.value}});toTops=document.querySelectorAll(".back-to-top");toTops.forEach(toTop=>{toTop.addEventListener("click",function(){document.body.scrollTop=0;document.documentElement.scrollTop=0})});const blogFilter=document.getElementById("js-blog-filter"),blogSearch=document.getElementById("blog-search");blogFilter&&blogSearch&&(blogFilter.onclick=function(){var link=blogFilter.getAttribute("data-url");blogFilter.setAttribute("href",link.replace("{keyword}",blogSearch.value))});const cardSections=document.querySelectorAll(".section-icons, .section-features");cardSections.forEach(section=>{const cardTitles=section.querySelectorAll(".card-title"),height=findTitleHeight(cardTitles);cardTitles.forEach(cardTitle=>{cardTitle.style.height=height+"px"})});stickyElement=document.querySelector(".sticky");stickyElement&&(window.addEventListener("scroll",updateStickyPosition),window.addEventListener("resize",updateStickyPosition),updateStickyPosition())});
"use strict";function scrollAnimation(selector,options={}){let els=document.querySelectorAll(selector);els=Array.from(els);els.forEach(el=>{addObserver(el,options)})}function addObserver(el,options){if(!("IntersectionObserver"in window)){options.cb&&options.cb(el);return}let observer=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{entry.isIntersecting&&(options.cb?options.cb(el):entry.target.classList.add("js-animate"),observer.unobserve(entry.target))})},options);observer.observe(el)}scrollAnimation(".fade-in-up");scrollAnimation(".fade-in-down");scrollAnimation(".fade-in-left");scrollAnimation(".fade-in-right");scrollAnimation(".fade-in");scrollAnimation(".scale-in");scrollAnimation(".card-timeline");scrollAnimation(".swiper-carousel-half-width");scrollAnimation(".blog-listing .card");scrollAnimation(".accordion");scrollAnimation(".section-jobs .job-listing");scrollAnimation("#results .job-listing");scrollAnimation("#js-job-list.job-listing");window.addEventListener("DOMContentLoaded",()=>{const transitionDelay=.2,featuresSections=document.querySelectorAll(".section-features, .section-pages-list, .swiper-carousel-half-width, .blog-listing");featuresSections.forEach(section=>{const cards=section.querySelectorAll(".card");cards.forEach((card,index)=>{card.style.transitionDelay=`${index*transitionDelay}s`})});const accordionSections=document.querySelectorAll(".accordion");accordionSections.forEach(section=>{const cards=section.querySelectorAll(".accordion-item, .card");cards.forEach((card,index)=>{card.style.transitionDelay=`${index*transitionDelay}s`})});const IconSections=document.querySelectorAll(".section-icons");IconSections.forEach(section=>{const cards=section.querySelectorAll(".card-image");cards.forEach((card,index)=>{card.style.transitionDelay=`${index*transitionDelay}s`})});const jobsections=document.querySelectorAll(".section-jobs:not(.js-latest-jobs) .job-listing, #results .job-listing");jobsections.forEach(jobsection=>{const cards=jobsection.querySelectorAll(".card");cards.forEach((card,index)=>{card.style.transitionDelay=index===0?`0.5s`:`${index*transitionDelay+.5}s`})});const observer=new MutationObserver(mutations=>{mutations.forEach(mutation=>{Array.from(mutation.addedNodes).filter(node=>node.nodeType===1&&node.classList.contains("card-job")).forEach((node,index)=>{node.style.transitionDelay=index===0?`0.5s`:`${index*transitionDelay+.5}s`})})}),ajaxJobs=document.getElementById("js-latest-jobs-list");ajaxJobs&&observer.observe(ajaxJobs,{childList:!0,subtree:!0})});
(function(){"use strict";function getUrlParam(name){if(typeof URLSearchParams=="function"){const urlParams=new URLSearchParams(window.location.search);return urlParams.get(name)}else{const results=new RegExp("[?&]"+name+"=([^&#]*)").exec(window.location.search);return results!==null?results[1]||0:!1}}function getReferrerMap(){const data=sessionStorage.getItem(sessionKey);let map;return map=data?JSON.parse(data):{},debugLog(map,"Get Map"),map}function storeReferrerMap(map){const json=JSON.stringify(map);sessionStorage.setItem(sessionKey,json);debugLog(json,"Store Map")}function trackReferrers(map){let storeMap=!1;for(let i=0;i<sources.length;i++){const source=sources[i];let param=getUrlParam(Object.keys(source));if(debugLog(source,"Source"),debugLog(param,"Param"),param)Object.keys(source)[0]==="source"&&param==="BeameryCRM"&&(param=beameryCode,debugLog(param,"Source param found here AND param is BeameryCRM")),map[Object.keys(source)]=param,storeMap=!0,debugLog(param,"Storing source value");else if(!map[Object.keys(source)]&&Object.values(source).length>0){const defaultValue=Object.values(source)[0];defaultValue&&(map[Object.keys(source)]=defaultValue,storeMap=!0,debugLog(defaultValue,"storing source default"))}}storeMap&&storeReferrerMap(map)}function appendReferrersToUrls(map){if(!(Object.keys(map).length<=0)){let qs="",first=0;for(let key in map)qs+=(first++==0?"":"&")+key+"="+encodeURIComponent(map[key]),key==="source"&&(qs+="&src="+encodeURIComponent(map[key]));qs.length>0&&appendToDomains(qs)}}function appendToDomains(qs){const links=document.querySelectorAll("a[href^='http']");links.forEach(function(element){const href=element.getAttribute("href");for(let i=0;i<domains.length;i++)href.indexOf(domains[i])>-1&&(href.indexOf("?")>-1?element.setAttribute("href",href+"&"+qs):element.setAttribute("href",href+"?"+qs),debugLog(href,"Appending"))})}function debugLog(data,title){debugMode&&data&&(title?console.log(title,data):console.log(data))}const sources=[{source:"CWS-13082"},{utm_source:null},{utm_medium:null},{utm_campaign:null},{utm_term:null},{utm_content:null}],domains=["pages.beamery.com","flows.beamery.com",".taleo.net"],sessionKey="ph.hd.referrers",beameryCode="CWS-13061",debugMode=!1;const map=getReferrerMap();trackReferrers(map);appendReferrersToUrls(map)})();
(function(){"use strict";function getDataAttributesAsQueryString(elem){if(!elem)return"";let params=new URLSearchParams;return(params.append("culture",culture),elem.dataset.length===0)?params.toString():(Object.keys(elem.dataset).forEach(function(key){params.append(key,elem.dataset[key])}),params.toString())}function revealElement(elem){elem&&(elem.removeAttribute("hidden"),elem.classList.remove("d-none"),elem.style.display="block")}const culture=document.getElementsByTagName("html")[0].getAttribute("lang"),requests=[{elem:document.getElementById("js-recently-viewed-jobs"),url:"/umbraco/jobboard/CandidateJobs/GetRecentJobs"},{elem:document.getElementById("js-latest-jobs-list"),url:"/umbraco/jobboard/LatestJobs/GetJobs"},{elem:document.getElementById("js-recommended-jobs"),url:"/umbraco/jobboard/LatestJobs/GetJobs"}],sendHttpRequest=function(method,url){return new Promise(function(resolve){const xhr=new XMLHttpRequest;xhr.open(method,url);xhr.setRequestHeader("x-ph","internal");xhr.onload=function(){resolve(xhr.response)};xhr.send()})};window.addEventListener("load",function(){requests.forEach(function(request){if(request.elem){const query=getDataAttributesAsQueryString(request.elem);query.length>0&&(request.url+="?"+query);const elements=request.target||request.elem;elements&&sendHttpRequest("GET",request.url).then(function(responseHTML){elements&&responseHTML&&responseHTML.trim().length>0&&(elements.length?elements.forEach(function(element){element.innerHTML+=responseHTML;revealElement(element.parentNode)}):(elements.innerHTML+=responseHTML,revealElement(elements.parentNode)),request.callback&&callback)})}})})})();
//# sourceMappingURL=/phb/nmap/app.js.v98feb422041a35f19bd2ab03306edb1e40c2981d